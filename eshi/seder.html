<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¢×¨×š ×©×™×¢×•×¨: ×¡×“×¨ ×™×•× ×ª×§×©×•×¨×ª×™ ×•×›×•×— ×¤×•×œ×™×˜×™</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #fdfbf7;
            --header-color: #E6E6FA;
            --part-a-color: #fff5ba;
            --part-b-color: #c7f4d7;
            --part-c-color: #f4d7c7;
            --rec-box-color: #e3f2fd;
            --border-style: 3px solid black;
            --shadow-style: 5px 5px 0px black;
        }

        body {
            font-family: 'Rubik', sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            color: #333;
        }

        /* Gatekeeper Logic */
        #main-container {
            max-width: 1000px;
            margin: 0 auto;
            filter: blur(8px);
            pointer-events: none;
            transition: filter 0.5s ease;
        }

        #gatekeeper-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: var(--border-style);
            box-shadow: var(--shadow-style);
            padding: 30px;
            z-index: 9999;
            text-align: center;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
        }

        /* 3D Retro UI Elements */
        .card {
            background: white;
            border: var(--border-style);
            box-shadow: var(--shadow-style);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .header-section { background-color: var(--header-color); }
        .part-a { background-color: var(--part-a-color); }
        .part-b { background-color: var(--part-b-color); }
        .part-c { background-color: var(--part-c-color); }
        
        /* Recommendation Box Specific Styles */
        .recommendation-box {
            background-color: var(--rec-box-color);
        }
        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .rec-item {
            background: rgba(255, 255, 255, 0.6);
            padding: 12px;
            border: 2px solid black;
            border-radius: 10px;
            font-size: 0.95rem;
            line-height: 1.4;
        }
        .rec-item strong {
            color: #1565c0;
            display: block;
            margin-bottom: 4px;
            font-size: 1.05rem;
        }

        h1, h2, h3 { font-weight: 900; margin-top: 0; }

        textarea {
            width: 100%;
            border: 2px solid black;
            border-radius: 10px;
            padding: 10px;
            font-family: 'Rubik', sans-serif;
            resize: vertical;
            min-height: 80px;
            margin-top: 10px;
        }

        select, input[type="checkbox"] {
            padding: 10px;
            border: 2px solid black;
            border-radius: 8px;
            font-size: 1rem;
        }

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }

        .concept-card {
            background: rgba(255,255,255,0.5);
            border: 2px solid black;
            padding: 15px;
            border-radius: 10px;
        }

        button {
            padding: 12px 25px;
            font-weight: 700;
            border: var(--border-style);
            box-shadow: 3px 3px 0px black;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            margin: 5px;
        }

        button:active {
            transform: translate(2px, 2px);
            box-shadow: 1px 1px 0px black;
        }

        .btn-draft { background-color: #fff176; }
        .btn-submit { background-color: #81c784; color: black; }
        .btn-drive { background-color: #64b5f6; display: none; margin-top: 15px; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            border: 2px solid black;
            padding: 10px;
            text-align: center;
        }

        th { background: rgba(0,0,0,0.05); }

        .article-content {
            line-height: 1.6;
            font-size: 1.1rem;
        }

        .success-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            z-index: 10000;
            padding: 40px;
            border: var(--border-style);
            box-shadow: var(--shadow-style);
            border-radius: 15px;
            text-align: center;
        }
    </style>
</head>
<body>

    <div id="gatekeeper-modal">
        <h2>×”×–×“×”×•×ª ×ª×œ××™×“/×” ğŸ“</h2>
        <p>×× × ×‘×—×¨×• ××ª ×©××›× ××”×¨×©×™××” ×›×“×™ ×œ×”×ª×—×™×œ:</p>
        <select id="student-select" onchange="handleStudentSelect()">
            <option value="">-- ×‘×—×™×¨×” ××”×¨×©×™××” --</option>
        </select>
        
        <div id="folder-link-container">
            <a id="drive-link" href="#" target="_blank">
                <button class="btn-drive" id="btn-drive">ğŸ“‚ ×¤×ª×™×—×ª ×ª×™×§×™×™×” ××™×©×™×ª ×‘×“×¨×™×™×‘</button>
            </a>
        </div>

        <div style="margin-top: 20px;">
            <input type="checkbox" id="logged-in-check" onchange="toggleUnlock()">
            <label for="logged-in-check">×× ×™ ××—×•×‘×¨/×ª ×œ×—×©×‘×•×Ÿ ×”×’×•×’×œ ×©×œ×™</label>
        </div>
    </div>

    <div id="main-container">
        
        <header class="card header-section">
            <h1>ğŸ›ï¸ ×¨××© ×”×××©×œ×” ×§×•×‘×¢ ×¡×“×¨ ×™×•× ×•×œ× ×”×¢×¨×•×¦×™×</h1>
            <div class="article-content">
                <p><strong>× ×™×ª×•×— ××§×¨×”: ×¡×¤×˜××‘×¨ 2025</strong></p>
                <p>×”×ª×§×©×•×¨×ª ×‘×“××•×§×¨×˜×™×” × ×—×©×‘×ª ×œ"×›×œ×‘ ×”×©××™×¨×”", ×©×ª×¤×§×™×“×• ×œ×§×‘×•×¢ ××” ×—×©×•×‘ ×œ×¦×™×‘×•×¨ ×œ×“×¢×ª. ××•×œ×, × ×™×ª×•×— ×©×œ ××™×¨×•×¢×™ ×”×ª×§×©×•×¨×ª ×”××—×¨×•× ×™× ×‘×™×©×¨××œ ××¨××” ××’××” ×”×¤×•×›×”: × ×ª× ×™×”×• ××¦×œ×™×— ×œ×”×›×ª×™×‘ ××ª ×¡×“×¨ ×”×™×•× (Agenda Setting) ×‘×¦×•×¨×” ×›××¢×˜ ××•×—×œ×˜×ª.</p>
                <ul>
                    <li><strong>×ª×–××•×Ÿ:</strong> ×”×•×“×¢×•×ª ×“×¨××˜×™×•×ª ×©××ª×¤×¨×¡××•×ª ×‘×“×™×•×§ ×›×©××ª×—×™×œ×™× ×ª×—×§×™×¨×™× ×‘×™×§×•×¨×ª×™×™×.</li>
                    <li><strong>××¡×’×•×¨:</strong> ×”×¤×™×›×ª ×›×œ ×“×™×•×Ÿ ×¢×™×ª×•× ××™ ×œ×“×™×•×Ÿ ×‘× ×•×©××™× ×©× ×•×—×™× ×œ×©×œ×˜×•×Ÿ.</li>
                    <li><strong>×¢×¨×•×¥ 14:</strong> ×¤×œ×˜×¤×•×¨××” ×”××©××©×ª ×›×–×¨×•×¢ ×”×¡×‘×¨×” ×™×©×™×¨×” ×œ×œ× ×‘×™×§×•×¨×ª ×¢×™×ª×•× ××™×ª.</li>
                </ul>
                <p><em>××©×™××”: ×¢×œ×™×›× ×œ× ×ª×— ××ª ×”××××¨ ×•×œ×”×©×™×‘ ×¢×œ ×”×©××œ×•×ª ×”×‘××•×ª ×ª×•×š ×©×™××•×© ×‘××•×©×’×™ ×”×™×¡×•×“.</em></p>
            </div>
        </header>

        <section class="card recommendation-box">
            <h3>ğŸ’¡ ××•×©×’×™× ××•××œ×¦×™× ×œ× ×™×ª×•×— (×‘×—×¨×• 4 ××ª×•×š ×”-6)</h3>
            <p>××•××œ×¥ ×œ×”×©×ª××© ×‘××•×©×’×™× ×”×‘××™× ×›×“×™ ×œ×”×¡×‘×™×¨ ××ª ×”××™×¨×•×¢×™× ×‘××××¨:</p>
            <div class="recommendation-grid">
                <div class="rec-item"><strong>×¡×“×¨ ×™×•× (Agenda Setting)</strong> ×”×××‘×§ ×¢×œ ×”×©××œ×” "××” ×”× ×•×©× ×”×›×™ ×—×©×•×‘ ×›×¨×’×¢?"</div>
                <div class="rec-item"><strong>××¡×’×•×¨ (Framing)</strong> ×”××•×¤×Ÿ ×©×‘×• ×‘×•×—×¨×™× ×œ×”×¦×™×’ ×¡×™×¤×•×¨ (×‘×™×˜×—×•× ×™, ×›×œ×›×œ×™ ××• ×¤×•×œ×™×˜×™).</div>
                <div class="rec-item"><strong>×“××•×§×¨×˜×™×”</strong> ×”××ª×— ×©×‘×™×Ÿ ×›×•×— ×”×©×œ×˜×•×Ÿ ×œ×‘×™×Ÿ ×—×•×¤×© ×”×‘×™×§×•×¨×ª.</div>
                <div class="rec-item"><strong>×—×•×¤×© ×”×¢×™×ª×•× ×•×ª</strong> ×”×× ×”×¢×™×ª×•× ××™× ×¢×¦×××™×™× ××• ×©×”× × ×’×¨×¨×™× ××—×¨×™ ×”×©×œ×˜×•×Ÿ?</div>
                <div class="rec-item"><strong>×”×•×Ÿ-×©×œ×˜×•×Ÿ-×¢×™×ª×•×Ÿ</strong> ×§×©×¨×™× ×‘×™×Ÿ ×‘×¢×œ×™ ××™× ×˜×¨×¡×™× ×¤×•×œ×™×˜×™×™× ×œ×›×œ×™ ×”×ª×§×©×•×¨×ª.</div>
                <div class="rec-item"><strong>×××•×Ÿ ×”×¦×™×‘×•×¨</strong> ×›×™×¦×“ ×”×ª× ×”×œ×•×ª ×”×ª×§×©×•×¨×ª ××©×¤×™×¢×” ×¢×œ ×”××•×¤×Ÿ ×‘×• ×”×§×”×œ ×ª×•×¤×¡ ××•×ª×”?</div>
            </div>
        </section>

        <section class="card part-a">
            <h2>×—×œ×§ ×': ××•×©×’×™ ×™×¡×•×“ (4 ××•×©×’×™×) ğŸ§©</h2>
            <div class="concept-grid" id="concept-grid">
                </div>
        </section>

        <section class="card part-b">
            <h2>×—×œ×§ ×‘': ×“×™×œ××” ××§×¦×•×¢×™×ª - ×¢×•×¨×š/×ª ×¨××©×™/×ª ğŸ“º</h2>
            <p><strong>×”×¡×™×˜×•××¦×™×”:</strong> ××ª× ×¢×•×¨×›×™× ×¨××©×™×™× ×©×œ ××”×“×•×¨×ª ×”×—×“×©×•×ª ×”××¨×›×–×™×ª. ×¨××© ×”×××©×œ×” ××•×“×™×¢ ×¢×œ "×”×¦×”×¨×” ×“×¨××˜×™×ª" ×‘×“×™×•×§ ×‘×¨×’×¢ ×©×‘×• ××ª× ×¢×•××“×™× ×œ×©×“×¨ ×ª×—×§×™×¨ ×‘×œ×¢×“×™ ×¢×œ ××—×“×œ ×›×œ×›×œ×™ ×—××•×¨.</p>
            
            <h3>1. ×”×’×“×¨×ª ×”×“×™×œ××”</h3>
            <textarea placeholder="×ª××¨×• ××ª ×”×§×•× ×¤×œ×™×§×˜ ×‘×™×Ÿ ×”×¢×¨×›×™× ×”××§×¦×•×¢×™×™×..." onpaste="return false"></textarea>

            <h3>2. ×˜×‘×œ×ª ××¤×©×¨×•×™×•×ª</h3>
            <table>
                <tr>
                    <th>×¤×¢×•×œ×”</th>
                    <th>×¨×•×•×— (××” × ×¨×•×•×™×—?)</th>
                    <th>××—×™×¨ (××” × ×¤×¡×™×“?)</th>
                </tr>
                <tr>
                    <td><textarea placeholder="××•×¤×¦×™×” ×'" onpaste="return false"></textarea></td>
                    <td><textarea placeholder="..." onpaste="return false"></textarea></td>
                    <td><textarea placeholder="..." onpaste="return false"></textarea></td>
                </tr>
                <tr>
                    <td><textarea placeholder="××•×¤×¦×™×” ×‘'" onpaste="return false"></textarea></td>
                    <td><textarea placeholder="..." onpaste="return false"></textarea></td>
                    <td><textarea placeholder="..." onpaste="return false"></textarea></td>
                </tr>
            </table>

            <h3>3. ×”×”×—×œ×˜×” ×©×œ×™</h3>
            <textarea placeholder="×‘×—×¨×ª×™ ×‘×“×¨×š ×¤×¢×•×œ×” X ×›×™..." onpaste="return false"></textarea>

            <h3>4. ×”×¤×ª×¨×•×Ÿ ×”×™×¦×™×¨×ª×™</h3>
            <textarea placeholder="×”×× ×™×© '×“×¨×š ×©×œ×™×©×™×ª'? ××” ×”××—×™×¨ ×©×œ×”?" onpaste="return false"></textarea>
        </section>

        <section class="card part-c">
            <h2>×—×œ×§ ×’': ×“×™×œ××” ××™×©×™×ª - ×‘× ×™ × ×•×¢×¨ ×•×¡×“×¨ ×™×•× ğŸ¤³</h2>
            <p><strong>×”×¡×™×˜×•××¦×™×”:</strong> ×—×©×‘×• ×¢×œ ××§×¨×” ×‘×—×™×™×›× (×‘×‘×™×ª ×”×¡×¤×¨, ×‘×¨×©×ª×•×ª ×”×—×‘×¨×ª×™×•×ª) ×©×‘×• ××™×©×”×• ××—×¨ × ×™×¡×” ×œ×§×‘×•×¢ ×œ×›× "×¡×“×¨ ×™×•×" ××• "××¡×’×•×¨" (×œ××©×œ: ×©××•×¢×” ×‘×•×•×˜×¡××¤ ×©××™×©×”×• ×”×¤×™×¥ ×›×“×™ ×œ×”×¡×™×— ×“×¢×ª ×××©×”×• ××—×¨).</p>
            
            <h3>1. ×”×’×“×¨×ª ×”×“×™×œ××” ×”××™×©×™×ª</h3>
            <textarea placeholder="×ª××¨×• ××ª ×”××§×¨×” ×©×œ×›×..." onpaste="return false"></textarea>

            <h3>2. ×˜×‘×œ×ª ××¤×©×¨×•×™×•×ª</h3>
            <table>
                <tr>
                    <th>×¤×¢×•×œ×”</th>
                    <th>×¨×•×•×—</th>
                    <th>××—×™×¨</th>
                </tr>
                <tr>
                    <td><textarea placeholder="..." onpaste="return false"></textarea></td>
                    <td><textarea placeholder="..." onpaste="return false"></textarea></td>
                    <td><textarea placeholder="..." onpaste="return false"></textarea></td>
                </tr>
            </table>

            <h3>3. ×”×”×—×œ×˜×” ×©×œ×™</h3>
            <textarea placeholder="×›×™×¦×“ ×¤×¢×œ×ª× ××• ×›×™×¦×“ ×ª×¤×¢×œ×•?" onpaste="return false"></textarea>

            <h3>4. ××—×©×‘×” ×‘×™×§×•×¨×ª×™×ª</h3>
            <textarea placeholder="××” ×œ××“×ª× ××”××§×¨×” ×”×–×” ×¢×œ ×›×•×— ×•×”×©×¤×¢×”?" onpaste="return false"></textarea>
        </section>

        <div style="text-align: center; padding-bottom: 40px;">
            <button class="btn-draft" onclick="saveWork('DRAFT')">ğŸ’¾ ×©××™×¨×” ×–×× ×™×ª (Draft)</button>
            <button class="btn-submit" onclick="saveWork('FINAL')">ğŸ ×¡×™×•× ×•×”×’×©×” ×¡×•×¤×™×ª</button>
        </div>

    </div>

    <div id="success-modal" class="success-modal">
        <h2 id="modal-title">×”×¢×‘×•×“×” × ×©××¨×” ×‘×”×¦×œ×—×”! ğŸ‰</h2>
        <p id="modal-msg"></p>
        <a id="final-drive-link" href="#" target="_blank">
            <button class="btn-drive" style="display: inline-block;">ğŸ“‚ ×œ××¢×‘×¨ ×œ×ª×™×§×™×™×ª ×”×”×’×©×” ×‘×“×¨×™×™×‘</button>
        </a>
    </div>

    <script>
        const students = {
            "×¨×•× ×™ ×™×§×•×˜×™": "https://drive.google.com/drive/folders/1bpcpNi4H44AbkfjeuQnHaBpNeWxWVDVg",
            "×¡×™×•×Ÿ ×‘×•×¨×•×›×•×‘×™×¥": "https://drive.google.com/drive/folders/1C0rBkWWxPslkKQ6RrOOEbyHl0OFZRkO7",
            "× ×•×¢×” ×’×•×œ×“×©×˜×™×™×Ÿ": "https://drive.google.com/drive/folders/10K0McJmU0ujzHUMufkUU26LIEYDXkZVu",
            "×™×§×™×¨ ×“×”×Ÿ": "https://drive.google.com/drive/folders/1WDrl1qVcIYb32pGrdrpzCj_FJudQSDt6",
            "×œ×™××œ ×“×”×Ÿ": "https://drive.google.com/drive/folders/1_iHzapVTZG_j01WdKt9s_icAkndDB6H6",
            "×’×•×œ×Ÿ ×“×˜×™××©×•×™×œ×™": "https://drive.google.com/drive/folders/1hVGGU8Bq_KuMyaKvCtK0oXnlk742gIRw",
            "×× ××œ ×“×¨×¢×™": "https://drive.google.com/drive/folders/1Q3tPdHpwAW6Nxol9TrBnVfNSrepH3kX7",
            "×œ×™×”×™ ×•×œ×¦×¨": "https://drive.google.com/drive/folders/1CmgX0HIkYALOaXMNFGcFUmuH2HACbC9s",
            "×’××™×” ×˜×’× ×¨": "https://drive.google.com/drive/folders/1aEOV4ISFQdbceaimr1nkV2zeHs6JgZn4",
            "×™×”×œ×™ ×˜×’× ×¨": "https://drive.google.com/drive/folders/1v8VryPD18lU7QWoc0SSsX_b-jYsdiWP5",
            "×œ×™×× ×˜×•×‘×œ×™": "https://drive.google.com/drive/folders/1MHYd8uGBoxEqsn56_JlmR_9IoNB-6NIR",
            "×ª×”×œ ×œ×•×™": "https://drive.google.com/drive/folders/1BrBJBHRnlkuDfXTDRfEFFpbDBCw1bEbW",
            "×©× ×”×‘ ××•×¡×¨×™": "https://drive.google.com/drive/folders/16ZWy4c3-N_ykTD6dzK_2Naq9dg0ZcCMN",
            "×˜×œ×™×” ××œ×›×”": "https://drive.google.com/drive/folders/1WTXazYTB3j04phsyCAC86HNso83u6mvJ",
            "× ×•×¢×” ××©×•×œ×": "https://drive.google.com/drive/folders/1cLR4BC7rN57syFOPAWgMdOev7adWzNw-",
            "×™×¨×“×Ÿ × ×—×•×": "https://drive.google.com/drive/folders/11wfwBYRrcJsUba6g8bmmbx5-AaEbkBhK",
            "××œ××•×’ × ×¤×ª×œ×™": "https://drive.google.com/drive/folders/1QYucVVxdu0pcVMdyy2a7qrhWXpj5DgO4",
            "×™×¨×™×Ÿ ×¢××¨": "https://drive.google.com/drive/folders/1ZvNc_JD7Xj1UFDueU7rOIw0hkMDVP7tG",
            "×©×™×¨×” ×¤×™× ×˜×•": "https://drive.google.com/drive/folders/1iq63SDTeyGXtF4zGZ5F5aGBiYL54VVhb",
            "××œ×™×¡×” ×¦×™×˜×¨×•×Ÿ": "https://drive.google.com/drive/folders/1-Ov9N2_DV8whFLL_8785K2m3UnNeBWod",
            "×’××™×” ×§× ×˜×•×¨": "https://drive.google.com/drive/folders/1X9GJMQi9zpZiDNLTIrhDtgrhn9wy02hI",
            "×”×™×œ×” ×§×¨××¨": "https://drive.google.com/drive/folders/1qzy8L5dOpAfLRxY0GbOGMD3-CIXDsF26",
            "×™×”×œ×™ ×¨××“×”": "https://drive.google.com/drive/folders/1wutsAUh0YHVbEcS-rxUYg6ssLwDWYjEp",
            "×˜×œ×™×” ×©×¨×¢×‘×™": "https://drive.google.com/drive/folders/1hnRpUNXx0gJWPo_CIsbwBkeBhORR6kbT"
        };

        const concepts = ["×“××•×§×¨×˜×™×”", "×—×•×¤×© ×”×‘×™×˜×•×™", "×–×›×•×ª ×”×¦×™×‘×•×¨ ×œ×“×¢×ª", "×—×•×¤×© ×”×¢×™×ª×•× ×•×ª", "×¤×œ×•×¨×œ×™×–×", "×¤×™×™×§ × ×™×•×–", "×”×˜×™×”", "×”×’××•× ×™×”", "×ª×¨×‘×•×ª ×”×‘×™×˜×•×œ", "×‘×¢×œ×•×ª ×¦×•×œ×‘×ª", "×”×•×Ÿ-×©×œ×˜×•×Ÿ-×¢×™×ª×•×Ÿ", "×××•×Ÿ ×”×¦×™×‘×•×¨", "××ª×™×§×” ×¢×™×ª×•× ××™×ª", "××•×“×œ ×œ××¡×•×•×œ", "××•×“×œ ×¤×™×¡×§", "×“×˜×¨××™× ×™×–× ×˜×›× ×•×œ×•×’×™", "×’×œ×•×‘×œ×™×–×¦×™×”", "×¡×“×¨ ×™×•× (Agenda Setting)", "××¡×’×•×¨", "×¡×¤×™×¨×œ×ª ×”×©×ª×™×§×”", "××¨×›×– ×•×¤×¨×™×¤×¨×™×”", "×¤×•×œ×™×¡××™×•×ª", "××œ×’×•×¨×™×ª×", "××•×‘×“×Ÿ ×”×™×œ×“×•×ª", "×¤×¢×¨ ×“×™×’×™×˜×œ×™", "×¨×™××œ×™×˜×™", "×¤×¨×¡×•× ×¡××•×™", "×ª×¨×‘×•×ª ×”×¦×¨×™×›×”", "×¡×˜×¨×™××•×˜×™×¤", "×—×™×‘×¨×•×ª", "×™×™×¦×•×’ ×•×”×“×¨×”"];

        window.onload = () => {
            const select = document.getElementById('student-select');
            Object.keys(students).sort().forEach(name => {
                const opt = document.createElement('option');
                opt.value = name;
                opt.textContent = name;
                select.appendChild(opt);
            });

            generateConceptGrid();
        };

        function generateConceptGrid() {
            const grid = document.getElementById('concept-grid');
            for (let i = 0; i < 4; i++) {
                const card = document.createElement('div');
                card.className = 'concept-card';
                card.innerHTML = `
                    <select onchange="bakeValues()"><option value="">×‘×—×¨ ××•×©×’...</option>${concepts.map(c => `<option value="${c}">${c}</option>`).join('')}</select>
                    <textarea placeholder="×”×¡×‘×¨ ×‘××™×œ×™× ×©×œ×š..." onpaste="return false" oninput="bakeValues()"></textarea>
                    <textarea placeholder="×‘×™×˜×•×™ ×‘×˜×§×¡×˜..." onpaste="return false" oninput="bakeValues()"></textarea>
                `;
                grid.appendChild(card);
            }
        }

        function handleStudentSelect() {
            const name = document.getElementById('student-select').value;
            const btn = document.getElementById('btn-drive');
            const link = document.getElementById('drive-link');
            
            if (name && students[name]) {
                link.href = students[name];
                btn.style.display = 'inline-block';
            } else {
                btn.style.display = 'none';
            }
        }

        function toggleUnlock() {
            const name = document.getElementById('student-select').value;
            const isChecked = document.getElementById('logged-in-check').checked;
            const main = document.getElementById('main-container');
            const modal = document.getElementById('gatekeeper-modal');

            if (name && isChecked) {
                main.style.filter = 'none';
                main.style.pointerEvents = 'auto';
                modal.style.display = 'none';
            } else if (isChecked && !name) {
                alert("×× × ×‘×—×¨/×™ ×©× ××”×¨×©×™××” ×ª×—×™×œ×”");
                document.getElementById('logged-in-check').checked = false;
            }
        }

        function bakeValues() {
            const textareas = document.querySelectorAll('textarea');
            textareas.forEach(ta => {
                ta.innerHTML = ta.value;
                ta.setAttribute('value', ta.value);
            });
            const selects = document.querySelectorAll('select');
            selects.forEach(sel => {
                const opts = sel.querySelectorAll('option');
                opts.forEach(opt => {
                    if (opt.value === sel.value) opt.setAttribute('selected', 'selected');
                    else opt.removeAttribute('selected');
                });
            });
        }

        function saveWork(type) {
            bakeValues();
            const name = document.getElementById('student-select').value;
            const lessonSlug = "AgendaSettingNetanyahu";
            const filename = `${type}_${lessonSlug}_${name.replace(/\s/g, '_')}.html`;
            
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = filename;
            a.click();

            if (type === 'DRAFT') {
                alert("×”×§×•×‘×¥ × ×©××¨ ×‘×ª×™×§×™×™×ª ×”×”×•×¨×“×•×ª ×©×œ×š. ×× × ×©×œ×—/×™ ××•×ª×• ×œ×¢×¦××š ×‘××™×™×œ ×›×“×™ ×œ×”××©×™×š ×œ×¢×‘×•×“ ×¢×œ×™×• ××”×‘×™×ª!");
            } else {
                const sModal = document.getElementById('success-modal');
                const driveLink = document.getElementById('final-drive-link');
                driveLink.href = students[name];
                document.getElementById('modal-msg').innerText = `×›×œ ×”×›×‘×•×“ ${name}! ×”×§×•×‘×¥ ×™×¨×“ ×œ××—×©×‘×š. ×›×¢×ª ×¢×œ×™×š ×œ×’×¨×•×¨ ××•×ª×• ×œ×ª×™×§×™×™×ª ×”×“×¨×™×™×‘ ×”××™×©×™×ª ×©×œ×š.`;
                sModal.style.display = 'block';
            }
        }
    </script>
</body>
</html>