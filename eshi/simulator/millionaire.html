<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0a0a2e">
<title>××™ ×¨×•×¦×” ×œ×”×™×•×ª ××™×œ×™×•× ×¨? - ××”×“×•×¨×ª ×ª×§×©×•×¨×ª</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;600;700;900&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Heebo', sans-serif;
    background: linear-gradient(135deg, #0a0a2e 0%, #1a1a4e 50%, #0d0d35 100%);
    min-height: 100vh;
    direction: rtl;
    color: #fff;
    overflow-x: hidden;
  }

  /* Stars */
  .stars {
    position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden;
  }
  .star {
    position: absolute; background: #fff; border-radius: 50%;
    animation: twinkle var(--dur) infinite alternate;
  }

  @keyframes twinkle { 0% { opacity: 0.2; } 100% { opacity: 1; } }
  @keyframes pulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.05); } }
  @keyframes glow { 0%,100% { box-shadow: 0 0 20px rgba(255,215,0,0.3); } 50% { box-shadow: 0 0 40px rgba(255,215,0,0.6); } }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes celebrateGold { 0% { text-shadow: 0 0 10px #ffd700; } 50% { text-shadow: 0 0 30px #ffd700, 0 0 60px #ff8c00; } 100% { text-shadow: 0 0 10px #ffd700; } }
  @keyframes correctFlash { 0%,100% { background: rgba(0,230,118,0.25); } 50% { background: rgba(0,230,118,0.5); } }
  @keyframes wrongFlash { 0%,100% { background: rgba(255,23,68,0.25); } 50% { background: rgba(255,23,68,0.5); } }
  @keyframes timerPulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.15); } }
  @keyframes confetti { 0% { transform: translateY(-20px) rotate(0deg); opacity:1; } 100% { transform: translateY(100vh) rotate(720deg); opacity:0; } }

  .screen { display: none; position: relative; z-index: 1; }
  .screen.active { display: flex; }

  /* HOME */
  #homeScreen {
    min-height: 100vh; flex-direction: column; align-items: center; justify-content: center; padding: 20px;
  }
  .home-title {
    font-size: clamp(24px, 5vw, 48px); font-weight: 900; color: #ffd700;
    text-shadow: 0 0 20px rgba(255,215,0,0.5), 0 4px 8px rgba(0,0,0,0.5);
    animation: celebrateGold 3s infinite; letter-spacing: 2px; margin-bottom: 8px;
  }
  .home-subtitle {
    font-size: clamp(14px, 2.5vw, 20px); color: #4dabff; font-weight: 300;
    letter-spacing: 1px; margin-bottom: 40px;
  }
  .form-panel {
    background: rgba(10,10,60,0.85); border-radius: 20px;
    padding: clamp(20px, 4vw, 40px); border: 1px solid rgba(255,215,0,0.2);
    backdrop-filter: blur(10px); max-width: 420px; width: 100%;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  }
  .form-input {
    width: 100%; padding: 14px 18px; font-size: 17px; font-family: 'Heebo', sans-serif;
    background: rgba(255,255,255,0.08); border: 1px solid rgba(255,215,0,0.3);
    border-radius: 12px; color: #fff; outline: none; direction: rtl; text-align: right;
    margin-bottom: 12px; transition: border-color 0.3s;
  }
  .form-input:focus { border-color: #ffd700; }
  .form-input::placeholder { color: rgba(255,255,255,0.4); }

  .btn-start {
    width: 100%; padding: 16px; font-size: 22px; font-weight: 700;
    font-family: 'Heebo', sans-serif;
    background: linear-gradient(135deg, #ffd700, #ff8c00); border: none;
    border-radius: 14px; color: #0a0a2e; cursor: pointer;
    transition: all 0.3s; letter-spacing: 1px; animation: glow 2s infinite;
    margin-top: 12px;
  }
  .btn-start:disabled {
    background: #555; color: #999; cursor: not-allowed; animation: none;
  }
  .btn-leaderboard {
    margin-top: 20px; padding: 12px 32px; font-size: 16px; font-family: 'Heebo', sans-serif;
    background: transparent; border: 2px solid #4dabff; border-radius: 12px;
    color: #4dabff; cursor: pointer; transition: all 0.3s;
  }
  .btn-leaderboard:hover { background: #4dabff; color: #0a0a2e; }

  /* GAME */
  #gameScreen {
    min-height: 100vh; flex-direction: column; padding: 10px;
  }
  .game-container { max-width: 900px; margin: 0 auto; width: 100%; }

  .top-bar {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px 16px; margin-bottom: 10px; flex-wrap: wrap; gap: 8px;
  }
  .player-info { color: #ffd700; font-size: 14px; font-weight: 600; }
  .timer {
    font-size: 28px; font-weight: 900; transition: color 0.3s;
  }
  .timer.danger { color: #ff1744; animation: timerPulse 0.5s infinite; text-shadow: 0 0 10px #ff1744; }
  .timer.warning { color: #ff8c00; text-shadow: 0 0 10px #ff8c00; }
  .timer.safe { color: #00e676; text-shadow: 0 0 10px #00e676; }
  .q-counter { color: #fff; font-size: 14px; }

  /* Prize ladder */
  .prize-ladder {
    display: flex; justify-content: center; gap: 4px; padding: 8px;
    margin-bottom: 12px; flex-wrap: wrap;
  }
  .prize-item {
    padding: 4px 8px; border-radius: 8px; font-size: 11px; font-weight: 600;
    transition: all 0.3s; border: 1px solid transparent;
  }
  .prize-item.current { background: linear-gradient(135deg, #ffd700, #ff8c00); color: #0a0a2e; }
  .prize-item.passed { background: rgba(0,230,118,0.2); color: #00e676; }
  .prize-item.safe-level { border-color: rgba(255,215,0,0.3); color: #ffd700; background: rgba(255,215,0,0.1); }
  .prize-item.future { background: rgba(255,255,255,0.05); color: rgba(255,255,255,0.4); }

  .arena-badge {
    text-align: center; margin-bottom: 8px;
  }
  .arena-badge span {
    background: rgba(156,39,176,0.3); color: #ce93d8;
    padding: 4px 16px; border-radius: 20px; font-size: 13px;
    border: 1px solid rgba(156,39,176,0.3); display: inline-block;
  }

  .question-box {
    background: rgba(10,10,60,0.85); border-radius: 20px;
    padding: clamp(16px, 3vw, 28px); margin-bottom: 16px;
    border: 2px solid rgba(255,215,0,0.3); text-align: center;
    animation: fadeIn 0.5s ease-out; box-shadow: 0 10px 40px rgba(0,0,0,0.3);
  }
  .question-text {
    color: #fff; font-size: clamp(16px, 2.5vw, 22px); font-weight: 600; line-height: 1.6;
  }

  .answers-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 10px; margin-bottom: 16px;
  }
  .answer-btn {
    display: flex; align-items: center; gap: 12px;
    padding: clamp(12px, 2vw, 16px) clamp(14px, 2vw, 20px);
    background: rgba(255,255,255,0.06); border: 2px solid rgba(255,255,255,0.15);
    border-radius: 14px; color: #fff; font-size: clamp(14px, 2vw, 17px);
    font-weight: 500; cursor: pointer; transition: all 0.3s;
    text-align: right; direction: rtl; width: 100%; font-family: 'Heebo', sans-serif;
    line-height: 1.4;
  }
  .answer-btn:hover:not(:disabled):not(.eliminated) {
    background: rgba(255,215,0,0.15); border-color: #ffd700;
  }
  .answer-btn.eliminated { opacity: 0.3; cursor: default; background: rgba(0,0,0,0.3); color: rgba(255,255,255,0.15); }
  .answer-btn.selected { background: rgba(255,215,0,0.2); border-color: #ffd700; }
  .answer-btn.correct { animation: correctFlash 0.5s infinite; border-color: #00e676; }
  .answer-btn.wrong { animation: wrongFlash 0.5s infinite; border-color: #ff1744; }
  .answer-btn.show-correct { animation: correctFlash 0.5s infinite; border-color: #00e676; }

  .answer-letter {
    width: 32px; height: 32px; border-radius: 50%;
    background: linear-gradient(135deg, rgba(255,215,0,0.25), rgba(255,140,0,0.25));
    display: flex; align-items: center; justify-content: center;
    font-weight: 800; font-size: 16px; flex-shrink: 0; color: #ffd700;
  }

  /* Audience poll */
  .audience-panel {
    background: rgba(10,10,60,0.85); border-radius: 16px; padding: 16px;
    margin-bottom: 16px; border: 1px solid rgba(30,144,255,0.3);
    animation: fadeIn 0.5s ease-out; text-align: center;
  }
  .audience-title { color: #4dabff; font-size: 14px; font-weight: 600; margin-bottom: 12px; }
  .audience-bars { display: flex; justify-content: center; gap: 16px; align-items: flex-end; height: 100px; }
  .audience-bar-wrap { display: flex; flex-direction: column; align-items: center; gap: 4px; }
  .audience-pct { color: #fff; font-size: 13px; font-weight: 600; }
  .audience-bar { width: 40px; border-radius: 6px 6px 0 0; transition: height 0.5s; }
  .audience-label { color: #ffd700; font-weight: 700; font-size: 14px; }

  /* Lifelines */
  .lifelines { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; }
  .lifeline-btn {
    padding: 10px 20px; border-radius: 12px; font-size: 15px; font-weight: 600;
    cursor: pointer; transition: all 0.3s; font-family: 'Heebo', sans-serif;
  }
  .lifeline-btn:disabled { cursor: default; }
  .ll-fifty { background: rgba(255,215,0,0.15); border: 1px solid rgba(255,215,0,0.4); color: #ffd700; }
  .ll-fifty:disabled { background: rgba(255,255,255,0.05); border-color: transparent; color: rgba(255,255,255,0.2); }
  .ll-audience { background: rgba(30,144,255,0.15); border: 1px solid rgba(77,171,255,0.4); color: #4dabff; }
  .ll-audience:disabled { background: rgba(255,255,255,0.05); border-color: transparent; color: rgba(255,255,255,0.2); }
  .ll-skip { background: rgba(156,39,176,0.15); border: 1px solid rgba(206,147,216,0.4); color: #ce93d8; }
  .ll-skip:disabled { background: rgba(255,255,255,0.05); border-color: transparent; color: rgba(255,255,255,0.2); }

  /* RESULT */
  #resultScreen {
    min-height: 100vh; flex-direction: column; align-items: center;
    justify-content: center; padding: 20px;
  }
  .result-container { text-align: center; animation: fadeIn 0.8s ease-out; max-width: 500px; width: 100%; }
  .result-emoji { font-size: 56px; margin-bottom: 16px; }
  .result-title {
    font-size: clamp(20px, 4vw, 32px); font-weight: 900; color: #ffd700; margin-bottom: 8px;
  }
  .result-title.millionaire { animation: celebrateGold 2s infinite; }
  .result-player { color: rgba(255,255,255,0.85); font-size: 16px; margin-bottom: 24px; }

  .stats-panel {
    background: rgba(10,10,60,0.85); border-radius: 20px; padding: 24px;
    border: 1px solid rgba(255,215,0,0.2); margin-bottom: 24px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
  }
  .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .stat-label { color: rgba(255,255,255,0.5); font-size: 13px; margin-bottom: 4px; }
  .stat-value { font-size: 24px; font-weight: 900; }
  .stat-gold { color: #ffd700; }
  .stat-blue { color: #4dabff; }
  .stat-green { color: #00e676; }
  .stat-purple { color: #ce93d8; }

  .result-buttons { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
  .btn-gold {
    padding: 14px 28px; font-size: 17px; font-weight: 700; font-family: 'Heebo', sans-serif;
    background: linear-gradient(135deg, #ffd700, #ff8c00); border: none;
    border-radius: 14px; color: #0a0a2e; cursor: pointer; transition: all 0.3s;
  }
  .btn-outline-blue {
    padding: 14px 28px; font-size: 17px; font-weight: 700; font-family: 'Heebo', sans-serif;
    background: transparent; border: 2px solid #4dabff; border-radius: 14px;
    color: #4dabff; cursor: pointer; transition: all 0.3s;
  }

  /* Confetti */
  .confetti-container { position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: 0; }
  .confetti-piece {
    position: absolute; font-size: 24px; top: -30px;
    animation: confetti var(--dur) var(--delay) infinite;
  }

  /* LEADERBOARD */
  #leaderboardScreen {
    min-height: 100vh; flex-direction: column; align-items: center; padding: 20px;
  }
  .lb-container { max-width: 800px; width: 100%; animation: fadeIn 0.6s ease-out; }
  .lb-header-section { text-align: center; margin-bottom: 24px; }
  .lb-emoji { font-size: 36px; margin-bottom: 8px; }
  .lb-title { font-size: clamp(20px, 4vw, 28px); font-weight: 900; color: #ffd700; margin-bottom: 4px; }
  .lb-count { color: rgba(255,255,255,0.5); font-size: 14px; }

  .lb-empty {
    text-align: center; color: rgba(255,255,255,0.4); padding: 40px; font-size: 18px;
  }

  .lb-table {
    background: rgba(10,10,60,0.85); border-radius: 20px;
    border: 1px solid rgba(255,215,0,0.15); overflow: hidden;
  }
  .lb-row {
    display: grid; grid-template-columns: 40px 1fr 110px 70px 85px 50px 50px;
    padding: 10px 16px; font-size: 13px; gap: 6px; align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .lb-row-header {
    background: rgba(255,215,0,0.1); font-weight: 700; color: #ffd700; font-size: 12px;
    border-bottom: 1px solid rgba(255,215,0,0.15);
  }
  .lb-row.top1 { background: rgba(255,215,0,0.08); }
  .lb-row.top2 { background: rgba(255,215,0,0.05); }
  .lb-row.top3 { background: rgba(255,215,0,0.03); }
  .lb-body { max-height: 400px; overflow-y: auto; }
  .lb-rank { font-weight: 800; font-size: 16px; }
  .lb-name { font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .lb-school { color: rgba(255,255,255,0.5); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .lb-class { color: rgba(255,255,255,0.5); }
  .lb-score { color: #ffd700; font-weight: 700; }
  .lb-level { color: #4dabff; }
  .lb-time { color: #00e676; }

  .lb-buttons { display: flex; gap: 12px; justify-content: center; margin-top: 24px; }

  /* Filter controls */
  .lb-filters {
    display: flex; gap: 10px; justify-content: center; margin-bottom: 16px; flex-wrap: wrap;
  }
  .filter-input {
    padding: 8px 14px; font-size: 14px; font-family: 'Heebo', sans-serif;
    background: rgba(255,255,255,0.08); border: 1px solid rgba(255,215,0,0.2);
    border-radius: 10px; color: #fff; outline: none; direction: rtl; text-align: right;
    transition: border-color 0.3s;
  }
  .filter-input:focus { border-color: #ffd700; }
  .filter-input::placeholder { color: rgba(255,255,255,0.3); }
  .btn-clear-lb {
    padding: 8px 16px; font-size: 13px; font-family: 'Heebo', sans-serif;
    background: rgba(255,23,68,0.15); border: 1px solid rgba(255,23,68,0.3);
    border-radius: 10px; color: #ff5252; cursor: pointer; transition: all 0.3s;
  }
  .btn-clear-lb:hover { background: rgba(255,23,68,0.3); }

  @media (max-width: 600px) {
    .lb-row { grid-template-columns: 30px 1fr 80px 50px 70px 40px 40px; font-size: 11px; padding: 8px 10px; gap: 4px; }
    .answers-grid { grid-template-columns: 1fr; }
    .answer-btn { min-height: 52px; padding: 14px 16px; font-size: 15px; -webkit-tap-highlight-color: transparent; }
    .lifeline-btn { padding: 12px 16px; font-size: 14px; min-height: 48px; }
    .form-input { font-size: 16px; padding: 16px 18px; }
    .btn-start { font-size: 20px; padding: 18px; min-height: 56px; }
    .prize-ladder { gap: 3px; }
    .prize-item { padding: 3px 5px; font-size: 9px; }
    .question-box { padding: 14px; }
    .question-text { font-size: 17px; }
    .top-bar { padding: 6px 10px; }
    .timer { font-size: 24px; }
    body { -webkit-overflow-scrolling: touch; }
  }

  @media (max-width: 380px) {
    .lb-row { grid-template-columns: 25px 1fr 60px 45px 60px 35px 35px; font-size: 10px; padding: 6px 8px; }
    .home-title { font-size: 22px; }
    .prize-item { padding: 2px 4px; font-size: 8px; }
  }

  /* Prevent text selection during game */
  .answer-btn, .lifeline-btn { -webkit-user-select: none; user-select: none; }
  
  /* Smooth scroll */
  html { scroll-behavior: smooth; }
  .lb-body { -webkit-overflow-scrolling: touch; }

  /* Admin */
  .admin-overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 1000;
    display: flex; align-items: center; justify-content: center; padding: 20px;
  }
  .admin-modal {
    background: rgba(10,10,60,0.95); border-radius: 20px; padding: 30px;
    border: 1px solid rgba(255,215,0,0.3); max-width: 350px; width: 100%;
    text-align: center; direction: rtl;
  }
  .admin-modal h3 { color: #ffd700; margin-bottom: 16px; font-size: 20px; }
  .admin-modal input {
    width: 100%; padding: 14px; font-size: 16px; font-family: 'Heebo', sans-serif;
    background: rgba(255,255,255,0.08); border: 1px solid rgba(255,215,0,0.3);
    border-radius: 12px; color: #fff; outline: none; text-align: center;
    margin-bottom: 16px; box-sizing: border-box;
  }
  .admin-modal input:focus { border-color: #ffd700; }
  .admin-btns { display: flex; gap: 10px; justify-content: center; }
  .admin-btns button {
    padding: 10px 24px; border-radius: 10px; font-size: 15px; font-weight: 600;
    font-family: 'Heebo', sans-serif; cursor: pointer; border: none; transition: all 0.3s;
  }
  .btn-admin-enter { background: linear-gradient(135deg, #ffd700, #ff8c00); color: #0a0a2e; }
  .btn-admin-cancel { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.6); border: 1px solid rgba(255,255,255,0.2) !important; }
  .btn-admin-login {
    margin-top: 12px; padding: 8px 20px; font-size: 13px; font-family: 'Heebo', sans-serif;
    background: transparent; border: 1px solid rgba(255,255,255,0.15); border-radius: 8px;
    color: rgba(255,255,255,0.3); cursor: pointer; transition: all 0.3s;
  }
  .btn-admin-login:hover { color: #ffd700; border-color: rgba(255,215,0,0.3); }
  .btn-admin-login.active { color: #00e676; border-color: rgba(0,230,118,0.4); }
  .btn-delete-entry {
    background: rgba(255,23,68,0.15); border: 1px solid rgba(255,23,68,0.3);
    color: #ff5252; width: 28px; height: 28px; border-radius: 50%; cursor: pointer;
    font-size: 14px; display: flex; align-items: center; justify-content: center;
    transition: all 0.3s; padding: 0; flex-shrink: 0;
  }
  .btn-delete-entry:hover { background: rgba(255,23,68,0.4); }
  .btn-admin-logout {
    padding: 8px 16px; font-size: 13px; font-family: 'Heebo', sans-serif;
    background: rgba(0,230,118,0.15); border: 1px solid rgba(0,230,118,0.3);
    border-radius: 10px; color: #00e676; cursor: pointer; transition: all 0.3s;
  }
  .credit { color: rgba(255,255,255,0.25); font-size: 11px; margin-top: 8px; }
</style>
</head>
<body>

<!-- Stars background -->
<div class="stars" id="starsContainer"></div>

<!-- ============ HOME SCREEN ============ -->
<div class="screen active" id="homeScreen">
  <div style="text-align:center">
    <div class="home-title">ğŸ’° ××™ ×¨×•×¦×” ×œ×”×™×•×ª ××™×œ×™×•× ×¨? ğŸ’°</div>
    <div class="home-subtitle">××”×“×•×¨×ª ×ª×§×©×•×¨×ª â€” ×›×œ ×”×–×™×¨×•×ª</div>

    <div class="form-panel">
      <input class="form-input" id="inputSchool" placeholder="ğŸ« ×©× ×‘×™×ª ×”×¡×¤×¨" />
      <input class="form-input" id="inputName" placeholder="ğŸ‘¤ ×©× ×”×ª×œ××™×“/×”" />
      <input class="form-input" id="inputClass" placeholder="ğŸ“š ×›×™×ª×” (×œ××©×œ: ×™'2)" />
      <button class="btn-start" id="btnStart" disabled>ğŸ® ×”×ª×—×œ ××©×—×§!</button>
    </div>

    <button class="btn-leaderboard" onclick="showLeaderboard()">ğŸ† ×˜×‘×œ×ª ×”××•×‘×™×œ×™×</button>
    
    <div style="margin-top:30px;color:rgba(255,255,255,0.3);font-size:12px;">
      ×¤×™×ª×•×—: ×¨× ×™ ×‘×Ÿ ×–××‘ ğŸ› ï¸
    </div>
  </div>
</div>

<!-- ============ GAME SCREEN ============ -->
<div class="screen" id="gameScreen">
  <div class="game-container">
    <div class="top-bar">
      <div class="player-info" id="gamePlayerInfo"></div>
      <div class="timer safe" id="timerDisplay">â± 45</div>
      <div class="q-counter" id="qCounter"></div>
    </div>

    <div class="prize-ladder" id="prizeLadder"></div>
    <div class="arena-badge"><span id="arenaBadge"></span></div>

    <div class="question-box">
      <div class="question-text" id="questionText"></div>
    </div>

    <div class="answers-grid" id="answersGrid"></div>

    <div class="audience-panel" id="audiencePanel" style="display:none">
      <div class="audience-title">ğŸ“Š ×©××™×œ×ª ×§×”×œ</div>
      <div class="audience-bars" id="audienceBars"></div>
    </div>

    <div class="lifelines">
      <button class="lifeline-btn ll-fifty" id="btnFifty" onclick="useFiftyFifty()">50:50</button>
      <button class="lifeline-btn ll-audience" id="btnAudience" onclick="useAudience()">ğŸ“Š ×©××™×œ×ª ×§×”×œ</button>
      <button class="lifeline-btn ll-skip" id="btnSkip" onclick="useSkip()">â­ ×“×œ×’</button>
    </div>
  </div>
</div>

<!-- ============ RESULT SCREEN ============ -->
<div class="screen" id="resultScreen">
  <div class="confetti-container" id="confettiContainer"></div>
  <div class="result-container">
    <div class="result-emoji" id="resultEmoji"></div>
    <div class="result-title" id="resultTitle"></div>
    <div class="result-player" id="resultPlayer"></div>

    <div class="stats-panel">
      <div class="stats-grid">
        <div>
          <div class="stat-label">× ×™×§×•×“ ×¡×•×¤×™</div>
          <div class="stat-value stat-gold" id="statScore"></div>
        </div>
        <div>
          <div class="stat-label">×”×’×¢×ª ×œ×©×œ×‘</div>
          <div class="stat-value stat-blue" id="statLevel"></div>
        </div>
        <div>
          <div class="stat-label">×–××Ÿ ×××•×¦×¢ ×œ×©××œ×”</div>
          <div class="stat-value stat-green" id="statTime"></div>
        </div>
        <div>
          <div class="stat-label">×¢×–×¨×•×ª ×©× ×•×¦×œ×•</div>
          <div class="stat-value stat-purple" id="statLifelines"></div>
        </div>
      </div>
    </div>

    <div class="result-buttons">
      <button class="btn-gold" onclick="goHome()">ğŸ”„ ×©×—×§ ×©×•×‘</button>
      <button class="btn-outline-blue" onclick="showLeaderboard()">ğŸ† ×˜×‘×œ×ª ××•×‘×™×œ×™×</button>
    </div>
  </div>
</div>

<!-- ============ LEADERBOARD SCREEN ============ -->
<div class="screen" id="leaderboardScreen">
  <div class="lb-container">
    <div class="lb-header-section">
      <div class="lb-emoji">ğŸ†</div>
      <div class="lb-title">×˜×‘×œ×ª ×”××•×‘×™×œ×™×</div>
      <div class="lb-count" id="lbCount"></div>
    </div>

    <div class="lb-filters">
      <input class="filter-input" id="filterSchool" placeholder="ğŸ” ×¡× ×Ÿ ×œ×¤×™ ×‘×™×ª ×¡×¤×¨" oninput="renderLeaderboard()" />
      <input class="filter-input" id="filterName" placeholder="ğŸ” ×¡× ×Ÿ ×œ×¤×™ ×©×" oninput="renderLeaderboard()" />
    </div>

    <div id="lbContent"></div>

    <div class="lb-buttons">
      <button class="btn-gold" onclick="goHome()">ğŸ  ×“×£ ×”×‘×™×ª</button>
      <button class="btn-admin-login" id="btnAdminToggle" onclick="toggleAdmin()">ğŸ” ×× ×”×œ</button>
    </div>
    <div class="credit">×¤×™×ª×•×—: ×¨× ×™ ×‘×Ÿ ×–××‘</div>
  </div>
</div>

<!-- Admin Login Modal -->
<div class="admin-overlay" id="adminModal" style="display:none">
  <div class="admin-modal">
    <h3>ğŸ” ×›× ×™×¡×ª ×× ×”×œ</h3>
    <input type="text" id="adminUser" placeholder="×©× ××©×ª××©" onkeydown="if(event.key==='Enter')document.getElementById('adminPassword').focus()" />
    <input type="password" id="adminPassword" placeholder="×¡×™×¡××”" onkeydown="if(event.key==='Enter')adminLogin()" />
    <div class="admin-btns">
      <button class="btn-admin-enter" onclick="adminLogin()">×›× ×™×¡×”</button>
      <button class="btn-admin-cancel" onclick="closeAdminModal()">×‘×™×˜×•×œ</button>
    </div>
  </div>
</div>

<!-- ============ FIREBASE SDK ============ -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// ==========================================
// FIREBASE CONFIG - ×©× ×” ××ª ×”×¤×¨×˜×™× ×©×œ×š ×›××Ÿ
// ==========================================
const FIREBASE_CONFIG = {
  apiKey: "AIzaSyBhDX_j8xRC29DDdtoiIYb8yYVecfjvqeI",
  authDomain: "millionaire-tikshoret.firebaseapp.com",
  databaseURL: "https://millionaire-tikshoret-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "millionaire-tikshoret",
  storageBucket: "millionaire-tikshoret.firebasestorage.app",
  messagingSenderId: "65684230835",
  appId: "1:65684230835:web:27221f79d579f8cab756c6"
};

let db = null;
let useFirebase = false;

try {
  firebase.initializeApp(FIREBASE_CONFIG);
  db = firebase.database();
  useFirebase = true;
  console.log("Firebase connected!");
} catch(e) {
  console.log("Firebase error, using localStorage:", e);
}

// ==========================================
// QUESTION BANK
// ==========================================
const ALL_QUESTIONS = [
  // ========== DIFFICULTY 1 (Easy) - Questions 1-5 (up to 2,000â‚ª gold) ==========
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×• ×”×¢×™×§×¨×•×Ÿ ×œ×¤×™×• ×œ×ª×§×©×•×¨×ª ×ª×¤×§×™×“ ×©×œ ×¤×™×§×•×— ×¢×œ ×”×××©×œ?",answers:["×¨×©×•×ª ×¨×‘×™×¢×™×ª","××¨×—×‘ ×¦×™×‘×•×¨×™","×”×’××•× ×™×” ×ª×¨×‘×•×ª×™×ª","××—×¨×™×•×ª×™×•×ª ×”×ª×§×©×•×¨×ª"],correct:0,difficulty:1},
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×™ '×ª×§×™× ×•×ª ×¤×•×œ×™×˜×™×ª' (×¤×•×œ×™×˜×™×§×œ×™ ×§×•×¨×§×˜)?",answers:["×—×§×™×§×” ×©××¡×“×™×¨×” ×¤×¨×¡×•× ×¤×•×œ×™×˜×™","×”×™×× ×¢×•×ª ××‘×™×˜×•×™×™× ×¤×•×’×¢× ×™×™×","×“×™×•×•×— ××•×‘×™×™×§×˜×™×‘×™ ×¢×œ ×¤×•×œ×™×˜×™×§×”","×ª××™×›×” ×‘××¤×œ×’×” ××¡×•×™××ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×• '×©×™×“×•×¨ ×¦×™×‘×•×¨×™'?",answers:["×©×™×“×•×¨ ××¡×—×¨×™ ×¢× ×¤×¨×¡×•××•×ª","×ª×§×©×•×¨×ª ×××•×× ×ª ××›×¡×¤×™ ×¦×™×‘×•×¨","×©×™×“×•×¨ ××•×¤×¢×œ ×œ×œ× ×¤×™×§×•×—","×©×™×“×•×¨ ×—×™ ×‘×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×• ×ª×¤×§×™×“×” ×©×œ '××•×¢×¦×ª ×”×¢×™×ª×•× ×•×ª'?",answers:["×œ×¦× ×–×¨ ×ª×›× ×™× ×‘×ª×§×©×•×¨×ª","×œ×¤×§×— ×¢×œ ×”××ª×™×§×” ×”×¢×™×ª×•× ××™×ª","×œ×§×‘×•×¢ ××ª ××—×™×¨×™ ×”×¢×™×ª×•× ×™×","×œ×‘×—×•×¨ ×¢×•×¨×›×™× ×¨××©×™×™×"],correct:1,difficulty:1},
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×™ '××ª×™×§×” ×¢×™×ª×•× ××™×ª'?",answers:["×—×•×§×™× ×××©×œ×ª×™×™× ×œ×ª×§×©×•×¨×ª","×›×œ×œ×™× ××§×¦×•×¢×™×™× ×œ×¢×‘×•×“×” ×¢×™×ª×•× ××™×ª","×©×™×˜×ª ×“×™×¨×•×’ ××™×›×•×ª ×¢×™×ª×•× ××™×","×ª×§× ×•×ª ×œ×”×’×‘×œ×ª ×”×¢×™×ª×•× ×•×ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 1",question:"××”× ××¨×›×™×‘×™ ××•×“×œ ×œ××¡×•×•×œ?",answers:["××™, ××”, ×‘×¢×¨×•×¥, ×œ××™, ×‘××™×–×• ×”×©×¤×¢×”","×©×•×œ×—, ××§×•×“×“, ×¢×¨×•×¥, ××¤×¢× ×—, ××§×‘×œ","×›×•×ª×¨×ª, ×ª××•× ×”, ×›×ª×‘×”, ×ª×’×•×‘×•×ª","×¢×™×ª×•× ××™, ×¢×•×¨×š, ××¤×¨×¡×, ×§×•×¨×"],correct:0,difficulty:1},
  {arena:"×–×™×¨×” 1",question:"××” ××‘×“×™×œ ×ª×§×©×•×¨×ª ×”××•× ×™× ××‘×™× ××™×©×™×ª?",answers:["×ª×§×©×•×¨×ª ×‘×™× ××™×©×™×ª ×”×™× ×‘×›×ª×‘ ×‘×œ×‘×“","×”××•× ×™× ×¤×•× ×” ×œ×§×”×œ ×¨×—×‘ ×•×× ×•× ×™××™","××™×Ÿ ×”×‘×“×œ ×‘×¢×™×“×Ÿ ×”×“×™×’×™×˜×œ×™","×‘×™× ××™×©×™×ª ×“×•×¨×©×ª × ×•×›×—×•×ª ×¤×™×–×™×ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 2",question:"××”×™ '×’×œ×•×‘×œ×™×–×¦×™×”' ×‘×ª×§×©×•×¨×ª?",answers:["×”×¤×¦×ª ×ª×›× ×™× ×•×™×¦×™×¨×ª ×ª×¨×‘×•×ª ×’×œ×•×‘×œ×™×ª","×ª×¨×’×•× ×ª×›× ×™× ×œ×©×¤×•×ª ×¨×‘×•×ª","×¤×ª×™×—×ª ×¢×¨×•×¦×™× ×‘×›×œ ××“×™× ×”","××™×¡×•×¨ ×¢×œ ×™×™×‘×•× ×ª×›× ×™× ××—×•\"×œ"],correct:0,difficulty:1},
  {arena:"×–×™×¨×” 2",question:"××”×• '×›×¤×¨ ×’×œ×•×‘×œ×™' ×œ×¤×™ ××§×œ×•×”×Ÿ?",answers:["×›×¤×¨ ×©×’×¨×™× ×‘×• ×× ×©×™× ××›×œ ×”×¢×•×œ×","×”×˜×›× ×•×œ×•×’×™×” ×”×¤×›×” ××ª ×”×¢×•×œ× ×œ××—×•×‘×¨","××ª×¨ ××™× ×˜×¨× ×˜ ×‘×™× ×œ××•××™","××¨×’×•×Ÿ ×‘×™× ×œ××•××™ ×œ×ª×§×©×•×¨×ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 3",question:"××”× '×—××©×ª ×”×\"××™×' ×‘×“×™×•×•×— ×¢×™×ª×•× ××™?",answers:["××™, ××”, ××ª×™, ×”×™×›×Ÿ, ××“×•×¢","××§×•×¨, ××¡×¨, ××“×™×•×, ××§×‘×œ, ××©×•×‘","××‘×•×, ××™×“×¢, ××¡×§× ×”, ××§×•×¨×•×ª, ×¡×™×•×","××’×–×™×Ÿ, ××”×“×•×¨×”, ××××¨, ××•×“×¢×”, ××›×ª×‘"],correct:0,difficulty:1},
  {arena:"×–×™×¨×” 3",question:"××”×• '×¢×¨×š ×—×“×©×•×ª×™'?",answers:["×”××—×™×¨ ×©×œ ×¢×™×ª×•×Ÿ ×™×•××™","×§×¨×™×˜×¨×™×•× ×™× ×œ×§×‘×™×¢×ª ×¡×™×§×•×¨ ××™×¨×•×¢","×”×“×™×¨×•×’ ×©×œ ×›×ª×‘×” ×‘××ª×¨","××¡×¤×¨ ×”×¦×¤×™×•×ª ×‘×›×ª×‘×”"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 3",question:"××”×• ×”×”×‘×“×œ ×‘×™×Ÿ ×—×“×©×•×ª ×§×©×•×ª ×œ×¨×›×•×ª?",answers:["×§×©×•×ª ×¢×•×¡×§×•×ª ×‘××™×¨×•×¢×™× ××™×™×“×™×™×","×§×©×•×ª ××“×•×™×§×•×ª ×™×•×ª×¨ ××¨×›×•×ª","×¨×›×•×ª ×¤×—×•×ª ×××™× ×•×ª ××§×©×•×ª","××™×Ÿ ×”×‘×“×œ ×××™×ª×™ ×‘×™× ×™×”×Ÿ"],correct:0,difficulty:1},
  {arena:"×–×™×¨×” 3",question:"××”×™ '×¢×™×ª×•× ×•×ª ×—×•×§×¨×ª'?",answers:["×¡×™×§×•×¨ ×©×œ ××©×˜×¨×” ×•×‘×ª×™ ××©×¤×˜","×—×©×™×¤×ª ××™×“×¢ ×©×¨×•×¦×™× ×œ×”×¡×ª×™×¨","×—×§×™×¨×ª ×˜×¨× ×“×™× ×‘×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª","×›×ª×™×‘×ª ××××¨×™× ××§×“××™×™×"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 4",question:"××”×™ '×¡××˜×™×¨×”' ×‘×”×§×©×¨ ×ª×§×©×•×¨×ª×™?",answers:["×‘×“×™×—×•×ª ×§×œ×™×œ×•×ª ×¢×œ ×¤×•×œ×™×˜×™×§××™×","×‘×™×§×•×¨×ª ×—×‘×¨×ª×™×ª ×‘×××¦×¢×•×ª ×”×•××•×¨","×ª×•×›× ×™×ª ×‘×™×“×•×¨ ×§×œ×™×œ×” ×‘×œ×‘×“","×¡×¨×˜×•×Ÿ ×•×™×¨××œ×™ ××¦×—×™×§ ×‘×¨×©×ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 4",question:"××”× '×××™×' ×‘×ª×¨×‘×•×ª ×”×“×™×’×™×˜×œ×™×ª?",answers:["×•×™×¨×•×¡×™ ××—×©×‘ ××¡×•×›× ×™×","×ª×›× ×™× ×”××•×¤×¦×™× ×•××©×ª× ×™× ×‘×¨×©×ª","×¡×•×’ ×©×œ ×¤×•× ×˜ ×“×™×’×™×˜×œ×™","×¤×¨×¡×•××•×ª ××§×•×•× ×•×ª ××•×ª×××•×ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 5",question:"××”×• '××œ×’×•×¨×™×ª×' ×‘×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª?",answers:["××ª×›× ×ª ×‘×—×‘×¨×ª ×˜×›× ×•×œ×•×’×™×”","× ×•×¡×—×” ×©×§×•×‘×¢×ª ×ª×›× ×™× ×œ××©×ª××©","×¡×•×’ ×—×“×© ×©×œ ×¨×©×ª ×—×‘×¨×ª×™×ª","×©×¤×ª ×ª×›× ×•×ª ××ª×§×“××ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 5",question:"××”×• '×¤×™×™×§ × ×™×•×–'?",answers:["×—×“×©×•×ª ×‘××ª×¨ ×œ× ××•×›×¨","××™×“×¢ ×©×’×•×™ ×©××•×¤×¥ ×œ×”×˜×¢×™×”","×—×“×©×•×ª ×™×©× ×•×ª ×©×¤×•×¨×¡××• ×©×•×‘","×˜×¢×•×ª ×¢×™×ª×•× ××™×ª ×œ× ××›×•×•× ×ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 5",question:"××”× '×‘×•×˜×™×' ×‘×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª?",answers:["××©×ª××©×™× ×¤×¢×™×œ×™× ×‘××™×•×—×“","×ª×•×›× ×•×ª ×©××—×§×•×ª ×¤×¢×™×œ×•×ª ×× ×•×©×™×ª","×¢×•×¨×›×™ ×ª×•×›×Ÿ ××§×¦×•×¢×™×™×","×× ×”×œ×™ ×§×‘×•×¦×•×ª ×•×“×¤×™×"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 5",question:"××”×• 'FOMO' (×¤×•××•)?",answers:["×¡×•×’ ×©×œ ××¤×œ×™×§×¦×™×” ×—×“×©×”","×—×¨×“×ª ×”×—××¦×” ×‘×¢×•×œ× ×“×™×’×™×˜×œ×™","×¤×•×¨××˜ ×©×œ ×§×•×‘×¥ ×“×™×’×™×˜×œ×™","×¨××©×™ ×ª×™×‘×•×ª ×©×œ ××¨×’×•×Ÿ"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 5",question:"××”×• '×¤×¢×¨ ×“×™×’×™×˜×œ×™'?",answers:["×”×¤×¨×© ×‘××—×™×¨×™ ××›×©×™×¨×™×","×¤×¢×¨ ×‘×’×™×©×” ×•×‘×™×“×¢ ×˜×›× ×•×œ×•×’×™","×‘××’ ×‘×ª×•×›× ×ª ××—×©×‘","×”×¤×¨×© ×‘×™×Ÿ ×’×¨×¡××•×ª ××¤×œ×™×§×¦×™×”"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 5",question:"××”× '×™×œ×™×“×™× ×“×™×’×™×˜×œ×™×™×'?",answers:["××™ ×©× ×•×œ×“×• ×œ×¢×•×œ× ×”×“×™×’×™×˜×œ×™","××”×’×¨×™× ×©×¢×‘×¨×• ×œ××“×™× ×” ×—×“×©×”","××©×ª××©×™ ×× ×“×¨×•××™×“ ×‘×œ×‘×“","××™×Ÿ ×”×’×“×¨×” ×‘×¨×•×¨×” ×œ×›×š"],correct:0,difficulty:1},
  {arena:"×–×™×¨×” 5",question:"××”×™ '×ª×§×©×•×¨×ª ×¡×™× ×›×¨×•× ×™×ª'?",answers:["×ª×§×©×•×¨×ª ×‘×–××Ÿ ×××ª ×›××• ×•×™×“××•","×ª×§×©×•×¨×ª ×‘×¢×‘×¨×™×ª ×‘×œ×‘×“","×ª×§×©×•×¨×ª ×‘×˜×œ×•×•×™×–×™×” ×‘×œ×‘×“","××™×Ÿ ×”×‘×“×œ ××-×¡×™× ×›×¨×•× ×™×ª"],correct:0,difficulty:1},
  {arena:"×–×™×¨×” 5",question:"××”×Ÿ '××•×©×™×•×ª ×¨×©×ª'?",answers:["×× ×”×œ×™ ××ª×¨×™ ×—×“×©×•×ª ×’×“×•×œ×™×","×‘×¢×œ×™ ×§×”×œ ×¢×•×§×‘×™× ×•××©×¤×™×¢×™×","××ª×›× ×ª×™× ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª","×× ×”×œ×™ ×§×‘×•×¦×•×ª ×•×•×˜×¡××¤"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 5",question:"××”×™ '×‘×™× ×” ××œ××›×•×ª×™×ª' ×‘×ª×§×©×•×¨×ª?",answers:["×¨×•×‘×•×˜ ×©×§×•×¨× ×—×“×©×•×ª","×˜×›× ×•×œ×•×’×™×” ×œ×™×¦×™×¨×ª ×ª×›× ×™× ×—×›××”","×ª×•×›× ×” ×œ×¢×¨×™×›×ª ×ª××•× ×•×ª","××¢×¨×›×ª ×œ×”×§×œ×˜×ª ×©×™×—×•×ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 6",question:"××” ××™×™×—×“ ××ª ×–'×× ×¨ ×”×¨×™××œ×™×˜×™?",answers:["×”×•× ×™×§×¨ ×™×•×ª×¨ ×œ×™×™×¦×•×¨","×©×™×œ×•×‘ ×ª×™×¢×•×“ ×¢× ×¢×¨×™×›×” ×“×¨××˜×™×ª","×”×•× ××©×•×“×¨ ×¨×§ ×‘×œ×™×œ×”","×”×•× ××‘×•×¡×¡ ×¢×œ ×ª×¡×¨×™×˜"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 6",question:"××”×™ '×¨×‘-×ª×¨×‘×•×ª×™×•×ª' ×‘×ª×§×©×•×¨×ª?",answers:["×©×™×“×•×¨×™× ×‘×©×¤×•×ª ×¨×‘×•×ª","×™×™×¦×•×’ ×§×‘×•×¦×•×ª ×ª×¨×‘×•×ª×™×•×ª ××’×•×•× ×•×ª","×™×™×‘×•× ×ª×•×›× ×™×•×ª ××—×•\"×œ ×‘×œ×‘×“","×¢×¨×•×¦×™× ×‘×™× ×œ××•××™×™× ×‘×œ×‘×“"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 7",question:"××”×• '×™×™×¦×•×’ ××’×“×¨×™' ×‘×ª×§×©×•×¨×ª?",answers:["××¡×¤×¨ ×”× ×©×™× ×‘×ª×§×©×•×¨×ª","××•×¤×Ÿ ×”×¦×’×ª ×’×‘×¨×™× ×•× ×©×™× ×‘×ª×›× ×™×","×©×™×•×•×§ ××•×¦×¨×™× ×œ×¤×™ ××’×“×¨","×”×¤×¨×“×” ×‘×™×Ÿ ×¢×¨×•×¦×™× ×œ××’×“×¨×™×"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 7",question:"××”×• '×¡×˜×¨×™××•×˜×™×¤'?",answers:["×¡×•×’ ×©×œ ××¦×œ××” ×™×©× ×”","×“×™××•×™ ××•×›×œ×œ ×©×œ ×§×‘×•×¦×ª ×× ×©×™×","×¡×’× ×•×Ÿ ×¢×™×¦×•×‘×™ ××•×“×¨× ×™","×¡×•×’ ×©×œ ×˜×§×¡×˜ ×¢×™×ª×•× ××™"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 8",question:"××”×• ×”×§×©×¨ ×‘×™×Ÿ ×¡×¤×•×¨×˜ ×œ×˜×œ×•×•×™×–×™×”?",answers:["××™×Ÿ ×§×©×¨ ××™×•×—×“ ×‘×™× ×™×”×","×™×—×¡×™ ×’×•××œ×™×Ÿ ×©×œ ×—×©×™×¤×” ×•×›×¡×£","×”×˜×œ×•×•×™×–×™×” ×¨×§ ××©×“×¨×ª ×¡×¤×•×¨×˜","×”×¡×¤×•×¨×˜ ×œ× ×¦×¨×™×š ×˜×œ×•×•×™×–×™×”"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 8",question:"××”×• ×”×§×©×¨ ×‘×™×Ÿ ×¡×¤×•×¨×˜ ×•×œ××•××™×•×ª?",answers:["××™×Ÿ ×§×©×¨ ×‘×™× ×™×”× ×›×œ×œ","×¡×¤×•×¨×˜ ××—×–×§ ×–×”×•×ª ×œ××•××™×ª","×¨×œ×•×•× ×˜×™ ×¨×§ ×‘××•×œ×™××¤×™××“×”","×¨×œ×•×•× ×˜×™ ×¨×§ ×œ×›×“×•×¨×’×œ"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 9",question:"××”×• '×©×™×•×•×§ ×“×™×’×™×˜×œ×™'?",answers:["××›×™×¨×ª ××•×¦×¨×™× ×“×™×’×™×˜×œ×™×™×","×§×™×“×•× ××•×ª×’×™× ×‘×¤×œ×˜×¤×•×¨××•×ª ×“×™×’×™×˜×œ×™×•×ª","×¤×ª×™×—×ª ×—× ×•×ª ××•× ×œ×™×™×Ÿ","×©×œ×™×—×ª ×¡×¤×× ×‘××™×™×œ"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 9",question:"××”×• '×¤×¨×¡×•× ×¡××•×™'?",answers:["×¤×¨×¡×•× ×©××•×¦×’ ×‘×œ×™×œ×”","×ª×•×›×Ÿ ×××•××Ÿ ×©× ×¨××” ×¢×™×ª×•× ××™","×¤×¨×¡×•× ×‘×’×•×“×œ ×§×˜×Ÿ ×××•×“","×¤×¨×¡×•× ×œ×œ× ×ª××•× ×•×ª ×›×œ×œ"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 9",question:"××”×™ '××ª×™×§×” ×‘×¤×¨×¡×•×'?",answers:["×¢×œ×•×ª ×”×¤×¨×¡×•× ×‘×©×•×§","×›×œ×œ×™ ×××™×ª×•×ª ×•×”×’×™× ×•×ª ×‘×¤×¨×¡×•×","×—×•×§×™ ××™×¡×•×™ ×¢×œ ×¤×¨×¡×•×","×¢×™×¦×•×‘ ×’×¨×¤×™ ×©×œ ×¤×¨×¡×•××•×ª"],correct:1,difficulty:1},
  {arena:"×–×™×¨×” 9",question:"××”×• '××§×˜×™×‘×™×–× ×—×‘×¨×ª×™'?",answers:["×¦×¤×™×™×” ×™×•××™×ª ×‘×—×“×©×•×ª","×¤×¢×•×œ×” ×™×–×•××” ×œ×©×™× ×•×™ ×—×‘×¨×ª×™","×”×¦×‘×¢×” ×‘×‘×—×™×¨×•×ª ×‘×œ×‘×“","×›×ª×™×‘×ª ××›×ª×‘×™× ×œ×¢×•×¨×š"],correct:1,difficulty:1},

  // ========== DIFFICULTY 2 (Medium) - Questions 6-10 (up to 100,000â‚ª gold) ==========
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×™ '×¤×•×¡×˜-×××ª' (Post-Truth)?",answers:["×¨×’×©×•×ª ××©×¤×™×¢×™× ×™×•×ª×¨ ××¢×•×‘×“×•×ª ×¢×œ ×“×¢×ª ×”×§×”×œ","×—×“×©×•×ª ×©×¤×•×¨×¡××• ××—×¨×™ ×—×©×™×¤×ª ×”×××ª","×ª×™×§×•×Ÿ ×©×œ ×™×“×™×¢×” ×©×’×•×™×” ×©×”×ª×¤×¨×¡××”","×’×™×œ×•×™ ×¢×™×ª×•× ××™ ×—×©×•×‘ ×©×œ ×©×—×™×ª×•×ª"],correct:0,difficulty:2},
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×™ '×ª×¨×‘×•×ª ×”×‘×™×˜×•×œ' (Cancel Culture)?",answers:["×‘×™×˜×•×œ ×ª×•×›× ×™×•×ª ×‘×’×œ×œ ×¨×™×™×˜×™× ×’ × ××•×š","×”×“×¨×” ×©×œ ××™×©×™×•×ª ×¦×™×‘×•×¨×™×ª ×‘×¢×§×‘×•×ª ×¤×’×™×¢×”","×¡×™×¨×•×‘ ×¢×™×ª×•× ××™ ×œ×¡×§×¨ × ×•×©× ××¡×•×™×","×‘×™×˜×•×œ ×—×•×¤×© ×”×¢×™×ª×•× ×•×ª ×‘××©×˜×¨"],correct:1,difficulty:2},
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”× '×‘×¢×œ×•×™×•×ª ×¦×•×œ×‘×•×ª' ×‘×ª×§×©×•×¨×ª?",answers:["×’×•×£ ××—×“ ×©×•×œ×˜ ×‘××¡×¤×¨ ×××¦×¢×™ ×ª×§×©×•×¨×ª","×©×™×ª×•×£ ×¤×¢×•×œ×” ×‘×™×Ÿ ×¢×™×ª×•× ×™× ××ª×—×¨×™×","×”×—×œ×¤×ª ×¢×•×¨×›×™× ×‘×™×Ÿ ×¢×¨×•×¦×™ ×˜×œ×•×•×™×–×™×”","×‘×¢×œ×•×ª ×¦×™×‘×•×¨×™×ª ××©×•×ª×¤×ª ×¢×œ ×¢×¨×•×¦×™×"],correct:0,difficulty:2},
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×™ '×ª×§×©×•×¨×ª ××’×•×™×¡×ª'?",answers:["×ª×§×©×•×¨×ª ×©××“×•×•×—×ª ×‘×¦×•×¨×” ××•×‘×™×™×§×˜×™×‘×™×ª","×ª×§×©×•×¨×ª ×©××§×“××ª ×¢××“×” ×‘××•×¤×Ÿ ××’××ª×™","×’×™×•×¡ ×›×¡×¤×™ ×¦×™×‘×•×¨ ×œ×ª×§×©×•×¨×ª","×©×™××•×© ×‘×ª×§×©×•×¨×ª ×œ×’×™×•×¡ ××ª× ×“×‘×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×• '××¨×—×‘ ×¦×™×‘×•×¨×™'?",answers:["×¤××¨×§×™× ×•×’× ×™× ×¦×™×‘×•×¨×™×™×","×–×™×¨×ª ×“×™×•×Ÿ ×—×•×¤×©×™ ×‘×¢× ×™×™× ×™ ×¦×™×‘×•×¨","××•×œ×¤×Ÿ ×˜×œ×•×•×™×–×™×” ×¤×ª×•×— ×œ×§×”×œ","××ª×¨×™ ××™× ×˜×¨× ×˜ ×××©×œ×ª×™×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 1",question:"××”×™ '×”×ª×›× ×¡×•×ª ××“×™×”'?",answers:["×›×™× ×•×¡ ×¢×™×ª×•× ××™× ×œ××™×¨×•×¢ ××™×•×—×“","××™×–×•×’ ×¤×œ×˜×¤×•×¨××•×ª ×œ×¤×•×¨××˜×™× ××’×•×•× ×™×","×™×¨×™×“×” ×‘××¡×¤×¨ ×¢×¨×•×¦×™ ×”×ª×§×©×•×¨×ª","××™×–×•×’ ×©×œ ×©× ×™ ×¢×™×ª×•× ×™× ×œ××—×“"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 1",question:"××”×• '×˜×©×˜×•×© ×’×‘×•×œ×•×ª' ×‘×ª×§×©×•×¨×ª ×“×™×’×™×˜×œ×™×ª?",answers:["××—×™×§×ª ×’×‘×•×œ×•×ª ×‘×™×Ÿ ××“×™× ×•×ª","×˜×©×˜×•×© ×‘×™×Ÿ ×™×•×¦×¨×™× ×œ×¦×¨×›× ×™ ×ª×•×›×Ÿ","×”×¡×¨×ª ××’×‘×œ×•×ª ×’×™×œ ×‘×ª×›× ×™×","×‘×™×˜×•×œ ××•×—×œ×˜ ×©×œ ×–×›×•×™×•×ª ×™×•×¦×¨×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 2",question:"××”×• '××™××¤×¨×™××œ×™×–× ×ª×¨×‘×•×ª×™'?",answers:["×›×™×‘×•×© ×¦×‘××™ ×©×œ ××“×™× ×•×ª","×›×¤×™×™×ª ×ª×¨×‘×•×ª ×—×–×§×” ×¢×œ ×—×œ×©×•×ª","×©×™××•×¨ ××¡×•×¨×•×ª ××§×•××™×•×ª ×‘×œ×‘×“","×”×—×œ×¤×ª ×ª×¨×‘×•×™×•×ª ×‘××•×¤×Ÿ ×©×•×•×™×•× ×™"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 2",question:"××”×• '×“×˜×¨××™× ×™×–× ×˜×›× ×•×œ×•×’×™'?",answers:["×”×˜×›× ×•×œ×•×’×™×” ××¢×¦×‘×ª ××ª ×”×—×‘×¨×” ×•×”×ª×¨×‘×•×ª","×—×‘×¨×•×ª ×˜×›× ×•×œ×•×’×™×” ×§×•×‘×¢×•×ª ××ª ×”×¢×ª×™×“","×©×™××•×© ×‘×˜×›× ×•×œ×•×’×™×” ×œ×—×™×–×•×™ ×”×¢×ª×™×“","×”×ª× ×’×“×•×ª ×œ×©×™××•×© ×‘×˜×›× ×•×œ×•×’×™×”"],correct:0,difficulty:2},
  {arena:"×–×™×¨×” 2",question:"××”×™ '×’×œ×•×§×œ×™×–×¦×™×”'?",answers:["×”×ª× ×’×“×•×ª ××•×—×œ×˜×ª ×œ×’×œ×•×‘×œ×™×–×¦×™×”","×”×ª×××ª ×ª×›× ×™× ×’×œ×•×‘×œ×™×™× ×œ××§×•×","×©×œ×™×—×ª ×ª×›× ×™× ××§×•××™×™× ×œ×—×•\"×œ","×¡×’×™×¨×ª ×’×‘×•×œ×•×ª ×œ×ª×›× ×™× ×–×¨×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 2",question:"××”×™ '×–×”×•×ª ×”×™×‘×¨×™×“×™×ª'?",answers:["×–×”×•×ª ×©×œ ×¨×•×‘×•×˜ ×—×›×","×©×™×œ×•×‘ ××¨×›×™×‘×™× ××ª×¨×‘×•×™×•×ª ×©×•× ×•×ª","×–×”×•×ª ××–×•×™×¤×ª ×‘×¨×©×ª","×–×”×•×ª ×©× ×§×‘×¢×ª ×¢×œ ×™×“×™ ×”×××©×œ×”"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 3",question:"××”×™ '×§×‘×™×¢×ª ×¡×“×¨ ×™×•×' (Agenda Setting)?",answers:["×ª×›× ×•×Ÿ ×œ×•×— ×”×©×™×“×•×¨×™× ×‘×¢×¨×•×¥","×”×ª×§×©×•×¨×ª ×§×•×‘×¢×ª ×¢×œ ××” ×œ×—×©×•×‘","×¡×“×¨ ×”× ×•×©××™× ×‘×™×©×™×‘×ª ××¢×¨×›×ª","×§×‘×™×¢×ª × ×•×©××™ ×”×“×™×•×Ÿ ×‘×›× ×¡×ª"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 3",question:"××”×• '××¡×’×•×¨' (Framing)?",answers:["×¢×™×¦×•×‘ ×’×¨×¤×™ ×©×œ ×›×ª×‘×”","×”×–×•×•×™×ª ×•×”×”×§×©×¨ ×©×”×ª×§×©×•×¨×ª ×‘×•×—×¨×ª","××¡×’×¨×ª ×—×•×§×™×ª ×©×œ ×—×•×¤×© ×”×¢×™×ª×•× ×•×ª","×”×’×“×¨×ª ×’×‘×•×œ×•×ª ××§×¦×•×¢×™×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 3",question:"××”×™ '×”×‘× ×™×™×” ×—×‘×¨×ª×™×ª ×©×œ ×”××¦×™××•×ª'?",answers:["×‘× ×™×™×ª ××ª×¨×™ ×—×“×©×•×ª ×‘××™× ×˜×¨× ×˜","×”×ª×§×©×•×¨×ª ××¢×¦×‘×ª ××¦×™××•×ª ×œ×§×”×œ","×ª×›× ×•×Ÿ ×¢×¨×™× ×¢×œ ×™×“×™ ×”×—×‘×¨×”","×‘× ×™×™×ª ××‘× ×™× ×¦×™×‘×•×¨×™×™× ×—×“×©×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 3",question:"××”×• '×¡×¤×™×Ÿ ×ª×§×©×•×¨×ª×™'?",answers:["×¡×™×‘×•×‘ ××¦×œ××” ×‘×–××Ÿ ×¦×™×œ×•×","×”×¦×’×ª ××™×“×¢ ××›×•×•× ×ª ×œ×¢×™×¦×•×‘ ×ª×¤×™×¡×•×ª","×©×™×“×•×¨ ×—×•×–×¨ ×©×œ ×›×ª×‘×” ×™×©× ×”","×‘×™×¦×•×¢ ×¡×§×¨ ×“×¢×ª ×§×”×œ"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 3",question:"××”×• ×”×”×‘×“×œ ×‘×™×Ÿ ×¢×™×ª×•× ××™ ×¤×¨×§×œ×™×˜ ×œ×©×•××¨ ×¡×£?",answers:["×¤×¨×§×œ×™×˜ ××§×“× ×¢××“×”, ×©×•××¨ ×¡×£ × ×™×™×˜×¨×œ×™","×¤×¨×§×œ×™×˜ ×¢×•×‘×“ ×¨×§ ×‘×‘×™×ª ××©×¤×˜","×©×•××¨ ×¡×£ ×”×•× ×¢×•×¨×š ×•×”×¤×¨×§×œ×™×˜ ×›×ª×‘","××™×Ÿ ×”×‘×“×œ ××§×¦×•×¢×™ ×‘×™× ×™×”×"],correct:0,difficulty:2},
  {arena:"×–×™×¨×” 3",question:"××”×• '×¦×™×œ×•× ××™×™×§×•× ×™'?",answers:["×¦×™×œ×•× ×©×œ ××™×™×§×•× ×™× ×“×ª×™×™×","×¦×™×œ×•× ×©×”×¤×š ×œ×¡××œ ×©×œ ××™×¨×•×¢","×¦×™×œ×•× ×‘××™×›×•×ª ×’×‘×•×”×” ×‘××™×•×—×“","×¦×™×œ×•× ×©×œ ×× ×©×™× ××¤×•×¨×¡××™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 3",question:"××”× ×“× ×•×˜×¦×™×” ×•×§×•× ×•×˜×¦×™×” (×‘××¨×ª')?",answers:["×“× ×•×˜×¦×™×”=××©××¢×•×ª ×™×©×™×¨×”, ×§×•× ×•×˜×¦×™×”=×¡××•×™×”","×¡×•×’×™× ×©×•× ×™× ×©×œ ××¦×œ××•×ª ××§×¦×•×¢×™×•×ª","×©×œ×‘×™× ×˜×›× ×™×™× ×‘×¢×¨×™×›×ª ×ª××•× ×•×ª","×¡×•×’×™ ×›×•×ª×¨×•×ª ×©×•× ×™× ×‘×¢×™×ª×•×Ÿ"],correct:0,difficulty:2},
  {arena:"×–×™×¨×” 4",question:"××”×• ×ª×¤×§×™×“ ×”×¡××˜×™×¨×” ×‘×“××•×§×¨×˜×™×”?",answers:["×œ×‘×“×¨ ××ª ×”×§×”×œ ×‘×œ×‘×“","×œ×‘×§×¨ ×©×œ×˜×•×Ÿ ×•×œ×—×©×•×£ ××™-×¦×“×§","×œ×”×¤×™×¥ ×ª×¢××•×œ×” ×××©×œ×ª×™×ª","×œ××›×•×¨ ×¢×™×ª×•× ×™× ×•××’×–×™× ×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 4",question:"××”×™ '×¤×•×œ×™×¡××™×•×ª'?",answers:["×©×™××•×© ×‘×©×¤×•×ª ×¨×‘×•×ª ×‘×ª×§×©×•×¨×ª","×˜×§×¡×˜ ×¤×ª×•×— ×œ×¤×¨×©× ×•×™×•×ª ×©×•× ×•×ª","××—×œ×” ×©×œ ×¦×¨×›× ×™ ××“×™×”","×¨×™×‘×•×™ ×¢×¨×•×¦×™ ×ª×§×©×•×¨×ª ×‘×©×•×§"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 5",question:"××”×• '×”×•×Ÿ ×“×™×’×™×˜×œ×™'?",answers:["×›×¡×£ ×“×™×’×™×˜×œ×™ ×›××• ×‘×™×˜×§×•×™×Ÿ","××™×•×× ×•×™×•×ª ×“×™×’×™×˜×œ×™×•×ª ×”××§× ×•×ª ×™×ª×¨×•×Ÿ","××¡×¤×¨ ×”×¢×•×§×‘×™× ×‘×¨×©×ª ×—×‘×¨×ª×™×ª","×ª×§×¦×™×‘ ×¤×¨×¡×•× ×‘×¢×•×œ× ×”×“×™×’×™×˜×œ×™"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 5",question:"×›×™×¦×“ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ××©× ×•×ª ×™×—×¡×™ ×›×•×—?",answers:["×”×Ÿ ×œ× ××©× ×•×ª ×“×‘×¨","×××¤×©×¨×•×ª ×œ××–×¨×—×™× ×œ××ª×’×¨ ×©×œ×˜×•×Ÿ","×”×Ÿ ××—×–×§×•×ª ×¨×§ ××ª ×”×©×œ×˜×•×Ÿ","×”×Ÿ ×¨×œ×•×•× ×˜×™×•×ª ×¨×§ ×œ×¦×¢×™×¨×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 5",question:"××”×• '×“×™×¤-×¤×™×™×§' (Deepfake)?",answers:["×—×©×‘×•×Ÿ ××–×•×™×£ ×‘×¨×©×ª ×—×‘×¨×ª×™×ª","×ª×•×›×Ÿ AI ×©××“××” ×× ×©×™× ×××™×ª×™×™×","××ª×¨ ×—×“×©×•×ª ××–×•×™×£ ×œ×’××¨×™","×ª××•× ×ª ×¤×¨×•×¤×™×œ ××–×•×™×¤×ª"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 6",question:"××”×• '×§×”×œ ×¤×¢×™×œ'?",answers:["×§×”×œ ×©×¦×•×¤×” ×‘×™×©×™×‘×” ×‘×œ×‘×“","×”×§×”×œ ××¤×¨×© ×•××¢×¦×‘ ××©××¢×•×™×•×ª","×§×”×œ ×©××©×ª×ª×£ ×‘×ª×•×›× ×™×•×ª","×§×”×œ ×©×¨×•×›×© ×× ×•×™×™× ×—×•×“×©×™×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 6",question:"××”×™ '×’×™×©×ª ×”×©×™××•×©×™× ×•×”×¡×™×¤×•×§×™×'?",answers:["×‘×“×™×§×” ×›××•×ª×™×ª ×©×œ ×¦×¤×™×™×”","××” ×”×§×”×œ ×¢×•×©×” ×¢× ×”××“×™×”","××“×™×“×ª ×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ ×œ×§×•×—×•×ª","×‘×“×™×§×ª ×”×©×¤×¢×ª ×”×¤×¨×¡×•×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 6",question:"××”×• ×”×”×‘×“×œ ×‘×™×Ÿ ×¨×™××œ×™×˜×™ ×œ×“×•×§×•×× ×˜×¨×™?",answers:["××™×Ÿ ×”×‘×“×œ ×‘×™× ×™×”× ×›×œ×œ","×“×•×§×•×× ×˜×¨×™ ××ª×¢×“, ×¨×™××œ×™×˜×™ ××‘×™×™×","×¨×™××œ×™×˜×™ ×××™×ª×™ ×™×•×ª×¨ ×ª××™×“","×“×•×§×•×× ×˜×¨×™ ×¨×§ ×‘×§×•×œ× ×•×¢"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 8",question:"××”×• '××™×¨×•×¢ ××“×™×”'?",answers:["××¡×™×‘×ª ×¢×™×ª×•× ××™× ×¨×’×™×œ×”","××™×¨×•×¢ ×©×”×•×¤×š ×œ×—×•×•×™×™×ª ×¦×¤×™×™×” ××©×•×ª×¤×ª","×›× ×¡ ×©× ×ª×™ ×©×œ ×× ×©×™ ×ª×§×©×•×¨×ª","×ª×§×œ×” ×‘×©×™×“×•×¨ ×—×™"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 8",question:"×›×™×¦×“ ×”×¡×¤×•×¨×˜ ×”×©×ª× ×” ×‘×’×œ×œ ×”×˜×œ×•×•×™×–×™×”?",answers:["×”×•× ×œ× ×”×©×ª× ×” ×›×œ×œ","×©×™× ×•×™ ×—×•×§×™× ×•×”×ª×××” ×œ×©×™×“×•×¨","×”×¡×¤×•×¨×˜ ×”×¤×š ×œ××œ×™× ×™×•×ª×¨","×‘×•×˜×œ×• ×›×œ ×”×›×œ×œ×™×"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 9",question:"××”×• '×¨×™×™×˜×™× ×’'?",answers:["×¦×™×•×Ÿ ××™×›×•×ª ×©×œ ×ª×•×›× ×™×ª","××“×“ ×›××•×ª×™ ×©×œ ×’×•×“×œ ×”×§×”×œ","×“×™×¨×•×’ ×©×œ ×©×—×§× ×™× ×‘×œ×™×’×”","×‘×™×§×•×¨×ª ×©×œ ××‘×§×¨×™ ×˜×œ×•×•×™×–×™×”"],correct:1,difficulty:2},
  {arena:"×–×™×¨×” 9",question:"××”× '×¡×•×’×™ ×¤× ×™×™×ª ××¡×¨' ×‘×¤×¨×¡×•×?",answers:["×¨×’×©×™×ª, ×¨×¦×™×•× ×œ×™×ª, ×”×•××•×¨×™×¡×˜×™×ª, ××¤×—×™×“×”","×¤× ×™×™×” ×‘×›×ª×‘ ×•×‘×¢×œ ×¤×” ×‘×œ×‘×“","×¤× ×™×™×” ×œ×™×œ×“×™× ×•×œ××‘×•×’×¨×™×","×¤× ×™×™×” ×™×©×™×¨×” ×•×¢×§×™×¤×” ×‘×œ×‘×“"],correct:0,difficulty:2},
  {arena:"×–×™×¨×” 9",question:"××”×™ '×ª×¨×‘×•×ª ×”×¦×¨×™×›×”'?",answers:["××›×™×œ×” ×‘×¨×™××” ×•××•×“×¢×ª","×¦×¨×™×›×ª ××•×ª×’×™× ×›×‘×™×˜×•×™ ×œ×–×”×•×ª","×§× ×™×•×ª ×‘×”× ×—×” ×‘×—×’×™×","×¡×§×™×¨×•×ª ××•×¦×¨×™× ×‘××™× ×˜×¨× ×˜"],correct:1,difficulty:2},

  // ========== DIFFICULTY 3 (Hard) - Questions 11-15 (up to 1,000,000â‚ª) ==========
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×™ '×”×’××•× ×™×” ×ª×¨×‘×•×ª×™×ª' ×œ×¤×™ ×’×¨××©×™?",answers:["×©×œ×™×˜×” ×‘×××¦×¢×•×ª ×”×¤×¦×ª ×¢×¨×›×™× ×›× ×•×¨××”","×—×§×™×§×” ×©××’×‘×™×œ×” ×—×•×¤×© ×‘×™×˜×•×™","××•× ×•×¤×•×œ ×©×œ ×¢×¨×•×¥ ×ª×§×©×•×¨×ª ××—×“","×”×©×ª×œ×˜×•×ª ×ª×¨×‘×•×ª×™×ª ×‘×›×•×— ×¦×‘××™"],correct:0,difficulty:3},
  {arena:"×–×™×¨×ª ×”×¢×œ",question:"××”×™ '×¤×•×œ×™×˜×™×§×” ×©×œ ×–×”×•×™×•×ª'?",answers:["××“×™× ×™×•×ª ×—×œ×•×§×ª ×ª×¢×•×“×•×ª ×–×”×•×ª","×¤×•×œ×™×˜×™×§×” ××‘×•×¡×¡×ª ×”×©×ª×™×™×›×•×ª ×§×‘×•×¦×ª×™×ª","×”×¦×‘×¢×” ×× ×•× ×™××™×ª ×‘×‘×—×™×¨×•×ª","×”×ª××§×“×•×ª ×‘×–×”×•×ª ×œ××•××™×ª ×‘×œ×‘×“"],correct:1,difficulty:3},
  {arena:"×–×™×¨×” 1",question:"××•×“×œ ×¤×™×¡×§ ××“×’×™×© ××ª ×—×©×™×‘×•×ª ×”:",answers:["×”×”×©×¤×¢×” ×”×™×©×™×¨×” ×¢×œ ×”×§×”×œ","×™×™×¦×•×¨ ×”××©××¢×•×ª ×¢×œ ×™×“×™ ×”× ××¢×Ÿ","×©×œ×™×˜×ª ×”×©×•×œ×— ×‘××¡×¨ ×©×œ×•","×”×¢×¨×•×¥ ×”×˜×›× ×•×œ×•×’×™ ×œ×”×¢×‘×¨×ª ××¡×¨"],correct:1,difficulty:3},
  {arena:"×–×™×¨×” 3",question:"××”×™ '×¡×¤×™×¨×œ×ª ×”×©×ª×™×§×”'?",answers:["×”×™×× ×¢×•×ª ××“×¢×ª ××™×¢×•×˜ ××—×©×© ×œ×‘×™×“×•×“","×¦× ×–×•×¨×” ×××©×œ×ª×™×ª ×©×œ ×”×¢×™×ª×•× ×•×ª","×™×¨×™×“×” ×›×œ×œ×™×ª ×‘×¦×¤×™×™×” ×‘×—×“×©×•×ª","×©×ª×™×§×ª ×¢×™×ª×•× ××™× ××¤× ×™ ×œ×—×¥"],correct:0,difficulty:3},
  {arena:"×–×™×¨×” 3",question:"××”×™ '×ª×™××•×¨×™×™×ª ××¨×›×– ×•×¤×¨×™×¤×¨×™×”'?",answers:["×”×‘×“×œ ×‘×™×Ÿ ×¢××•×“×™× ×¨××©×•× ×™× ×•××—×¨×•× ×™×","×§×‘×•×¦×•×ª ××¨×›×–×™×•×ª ××™×•×¦×’×•×ª ×™×ª×¨","××™×§×•× ×”××¦×œ××•×ª ×‘××•×œ×¤×Ÿ","×—×œ×•×§×ª ×ª×§×¦×™×‘×™× ×‘×™×Ÿ ×¢×¨×•×¦×™×"],correct:1,difficulty:3},
  {arena:"×–×™×¨×” 3",question:"××”× ×¦×™×œ×•× ×”×œ× ×•×¢×™×™×¤×•×ª ××—××œ×”?",answers:["×ª××•× ×•×ª ×©× ×•×¢×“×• ×œ×–×¢×–×¢ ×•××“×™×©×•×ª ×©× ×•×¦×¨×ª","×¡×•×’×™ ×ª×§×œ×•×ª ×©×•× ×™× ×‘××¦×œ××”","×¨×’×©×•×ª ×©×•× ×™× ×©×œ ×¦×œ× ×¢×™×ª×•× ×•×ª","×©×œ×‘×™× ××§×¦×•×¢×™×™× ×‘×¢×¨×™×›×ª ×›×ª×‘×”"],correct:0,difficulty:3},
  {arena:"×–×™×¨×” 5",question:"××”×• '×”×’×™×•×Ÿ ××¢×§×‘×™' (Surveillance Logic)?",answers:["××¢×§×‘ ××©×˜×¨×ª×™ ××—×¨ ×¤×•×©×¢×™×","××™×¡×•×£ ××™×“×¢ ×¢×œ ××©×ª××©×™× ×œ×¦×¨×›×™× ××¡×—×¨×™×™×","××¢×§×‘ ×©×•×˜×£ ××—×¨ ×¨×™×™×˜×™× ×’","×‘×“×™×§×ª ×¢×•×‘×“×•×ª ×‘×¢×™×ª×•× ×•×ª"],correct:1,difficulty:3},
  {arena:"×–×™×¨×” 7",question:"××”×™ '×”×›×—×“×” ×¡×™××‘×•×œ×™×ª'?",answers:["××—×™×§×ª ×¡××œ×™× ×™×©× ×™×","×ª×ª-×™×™×¦×•×’ ×©××¢×‘×™×¨ ××¡×¨ ×©×œ ×—×•×¡×¨ ×—×©×™×‘×•×ª","×”×¡×¨×ª ×¤×¨×¡×•××•×ª ××¢×¨×•×¦×™×","×¦× ×–×•×¨×” ×™×©×™×¨×” ×©×œ ×ª×›× ×™×"],correct:1,difficulty:3},
  {arena:"×–×™×¨×” 7",question:"××”×™ '×”×‘× ×™×™×” ×—×‘×¨×ª×™×ª ×©×œ ××’×“×¨' ×‘×§×œ×™×¤×™×?",answers:["×‘× ×™×™×ª ××•×œ×¤× ×™ ×¦×™×œ×•× ××ª×§×“××™×","×—×™×–×•×§ ×ª×¤×™×¡×•×ª × ×œ××“×•×ª ×©×œ ××’×“×¨","×”×›×©×¨×ª ×©×—×§× ×™× ×œ×§×œ×™×¤×™×","×¢×™×¦×•×‘ ×ª×¤××•×¨×” ×œ×¤×™ ××’×“×¨"],correct:1,difficulty:3}
];

// ==========================================
// PRIZE LEVELS
// ==========================================
const PRIZE_LEVELS = [
  {level:1,amount:"100 â‚ª",safe:false},{level:2,amount:"200 â‚ª",safe:false},
  {level:3,amount:"500 â‚ª",safe:false},{level:4,amount:"1,000 â‚ª",safe:false},
  {level:5,amount:"2,000 â‚ª",safe:true},{level:6,amount:"5,000 â‚ª",safe:false},
  {level:7,amount:"10,000 â‚ª",safe:false},{level:8,amount:"20,000 â‚ª",safe:false},
  {level:9,amount:"50,000 â‚ª",safe:false},{level:10,amount:"100,000 â‚ª",safe:true},
  {level:11,amount:"200,000 â‚ª",safe:false},{level:12,amount:"400,000 â‚ª",safe:false},
  {level:13,amount:"500,000 â‚ª",safe:false},{level:14,amount:"750,000 â‚ª",safe:false},
  {level:15,amount:"1,000,000 â‚ª",safe:true}
];

const LETTERS = ["×","×‘","×’","×“"];

// ==========================================
// GAME STATE
// ==========================================
let state = {
  schoolName: "", playerName: "", playerClass: "",
  questions: [], currentQ: 0,
  selectedAnswer: null, answerState: null,
  lifelines: { fiftyFifty: true, audience: true, skip: true },
  eliminated: [], audienceData: null,
  timerValue: 45, timerInterval: null,
  qStartTime: 0, questionTimes: [],
  leaderboard: [],
  firebaseKeys: {},  // maps index to firebase key for deletion
  isAdmin: false
};

const ADMIN_PASSWORD = null; // password stored in Firebase, not in code

// Set admin credentials in Firebase (run once)
async function initAdminInFirebase() {
  if (!useFirebase) return;
  try {
    const snap = await db.ref('admin-config').once('value');
    if (!snap.val()) {
      await db.ref('admin-config').set({
        username: "admin",
        password: "admin"
      });
      console.log("Admin credentials initialized in Firebase");
    }
  } catch(e) { console.error("Admin init error:", e); }
}

// ==========================================
// HELPERS
// ==========================================
function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function pickQuestions() {
  const easy = shuffle(ALL_QUESTIONS.filter(q => q.difficulty === 1)).slice(0, 5);
  const medium = shuffle(ALL_QUESTIONS.filter(q => q.difficulty === 2)).slice(0, 5);
  const hard = shuffle(ALL_QUESTIONS.filter(q => q.difficulty === 3)).slice(0, 5);
  
  // Gold milestones: 1-5 easy (up to 2,000â‚ª), 6-10 medium (up to 100,000â‚ª), 11-15 hard (up to 1,000,000â‚ª)
  const picked = [...easy, ...medium, ...hard];
  
  return picked.map(q => {
    const correctAns = q.answers[q.correct];
    const shuffled = shuffle(q.answers);
    return { ...q, answers: shuffled, correct: shuffled.indexOf(correctAns) };
  });
}

function scoreFromLevel(level) {
  if (level <= 0) return 0;
  return parseInt(PRIZE_LEVELS[level-1].amount.replace(/[^\d]/g,""));
}

function safeScore(level) {
  for (let i = level - 1; i >= 0; i--) {
    if (PRIZE_LEVELS[i].safe) return scoreFromLevel(i+1);
  }
  return 0;
}

// ==========================================
// SCREENS
// ==========================================
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function goHome() {
  clearInterval(state.timerInterval);
  document.getElementById('inputSchool').value = '';
  document.getElementById('inputName').value = '';
  document.getElementById('inputClass').value = '';
  showScreen('homeScreen');
}

// ==========================================
// STARS
// ==========================================
function createStars() {
  const c = document.getElementById('starsContainer');
  for (let i = 0; i < 50; i++) {
    const s = document.createElement('div');
    s.className = 'star';
    const size = Math.random() * 3 + 1;
    s.style.cssText = `width:${size}px;height:${size}px;top:${Math.random()*100}%;left:${Math.random()*100}%;--dur:${2+Math.random()*3}s;opacity:${Math.random()*0.5+0.3}`;
    c.appendChild(s);
  }
}

// ==========================================
// START GAME
// ==========================================
function startGame() {
  state.schoolName = document.getElementById('inputSchool').value.trim();
  state.playerName = document.getElementById('inputName').value.trim();
  state.playerClass = document.getElementById('inputClass').value.trim();
  if (!state.playerName) return;

  state.questions = pickQuestions();
  state.currentQ = 0;
  state.selectedAnswer = null;
  state.answerState = null;
  state.lifelines = { fiftyFifty: true, audience: true, skip: true };
  state.eliminated = [];
  state.audienceData = null;
  state.questionTimes = [];
  state.qStartTime = Date.now();

  document.getElementById('btnFifty').disabled = false;
  document.getElementById('btnAudience').disabled = false;
  document.getElementById('btnSkip').disabled = false;
  document.getElementById('audiencePanel').style.display = 'none';

  showScreen('gameScreen');
  renderGame();
}

// ==========================================
// RENDER GAME
// ==========================================
function renderGame() {
  const q = state.questions[state.currentQ];

  // Player info
  let info = `ğŸ‘¤ ${state.playerName}`;
  if (state.playerClass) info += ` | ${state.playerClass}`;
  if (state.schoolName) info += ` | ğŸ« ${state.schoolName}`;
  document.getElementById('gamePlayerInfo').textContent = info;

  document.getElementById('qCounter').textContent = `×©××œ×” ${state.currentQ + 1} / 15`;

  // Arena badge
  document.getElementById('arenaBadge').textContent = `ğŸ“š ${q.arena} | ×¨××”: ${"â­".repeat(q.difficulty)}`;

  // Question
  document.getElementById('questionText').textContent = q.question;

  // Prize ladder
  const ladder = document.getElementById('prizeLadder');
  ladder.innerHTML = '';
  PRIZE_LEVELS.forEach((p, i) => {
    const el = document.createElement('div');
    el.className = 'prize-item ' + (i === state.currentQ ? 'current' : i < state.currentQ ? 'passed' : p.safe ? 'safe-level' : 'future');
    el.textContent = p.amount;
    ladder.appendChild(el);
  });

  // Answers
  const grid = document.getElementById('answersGrid');
  grid.innerHTML = '';
  q.answers.forEach((ans, i) => {
    const btn = document.createElement('button');
    btn.className = 'answer-btn';
    if (state.eliminated.includes(i)) btn.classList.add('eliminated');
    btn.innerHTML = `<span class="answer-letter">${LETTERS[i]}</span><span>${ans}</span>`;
    btn.onclick = () => selectAnswer(i);
    if (state.eliminated.includes(i) || state.answerState) btn.disabled = true;
    grid.appendChild(btn);
  });

  // Start timer
  startTimer();
}

// ==========================================
// TIMER
// ==========================================
function startTimer() {
  clearInterval(state.timerInterval);
  state.timerValue = 45;
  updateTimerDisplay();
  state.timerInterval = setInterval(() => {
    state.timerValue--;
    updateTimerDisplay();
    if (state.timerValue <= 0) {
      clearInterval(state.timerInterval);
      timeUp();
    }
  }, 1000);
}

function updateTimerDisplay() {
  const el = document.getElementById('timerDisplay');
  el.textContent = `â± ${state.timerValue}`;
  el.className = 'timer ' + (state.timerValue > 20 ? 'safe' : state.timerValue > 10 ? 'warning' : 'danger');
}

function timeUp() {
  state.answerState = 'wrong';
  // Show correct answer
  const btns = document.querySelectorAll('.answer-btn');
  btns.forEach((btn, i) => {
    btn.disabled = true;
    if (i === state.questions[state.currentQ].correct) btn.classList.add('show-correct');
  });
  setTimeout(() => endGame(state.currentQ), 2000);
}

// ==========================================
// ANSWER SELECTION
// ==========================================
function selectAnswer(idx) {
  if (state.answerState || state.eliminated.includes(idx)) return;
  clearInterval(state.timerInterval);

  state.selectedAnswer = idx;
  state.answerState = 'checking';
  state.questionTimes.push((Date.now() - state.qStartTime) / 1000);

  const btns = document.querySelectorAll('.answer-btn');
  btns.forEach((btn, i) => {
    btn.disabled = true;
    if (i === idx) btn.classList.add('selected');
  });

  setTimeout(() => {
    const correct = state.questions[state.currentQ].correct;
    if (idx === correct) {
      state.answerState = 'correct';
      btns[idx].classList.remove('selected');
      btns[idx].classList.add('correct');
      setTimeout(() => {
        if (state.currentQ === 14) {
          endGame(15);
        } else {
          state.currentQ++;
          state.selectedAnswer = null;
          state.answerState = null;
          state.eliminated = [];
          state.audienceData = null;
          state.qStartTime = Date.now();
          document.getElementById('audiencePanel').style.display = 'none';
          renderGame();
        }
      }, 1500);
    } else {
      state.answerState = 'wrong';
      btns[idx].classList.remove('selected');
      btns[idx].classList.add('wrong');
      btns[correct].classList.add('show-correct');
      setTimeout(() => endGame(state.currentQ), 2000);
    }
  }, 2000);
}

// ==========================================
// LIFELINES
// ==========================================
function useFiftyFifty() {
  if (!state.lifelines.fiftyFifty || state.answerState) return;
  const correct = state.questions[state.currentQ].correct;
  const wrong = [0,1,2,3].filter(i => i !== correct);
  const toElim = shuffle(wrong).slice(0, 2);
  state.eliminated = toElim;
  state.lifelines.fiftyFifty = false;
  document.getElementById('btnFifty').disabled = true;

  const btns = document.querySelectorAll('.answer-btn');
  toElim.forEach(i => {
    btns[i].classList.add('eliminated');
    btns[i].disabled = true;
  });
}

function useAudience() {
  if (!state.lifelines.audience || state.answerState) return;
  const correct = state.questions[state.currentQ].correct;
  const data = [0,0,0,0];
  const cPct = 40 + Math.floor(Math.random() * 35);
  data[correct] = cPct;
  let left = 100 - cPct;
  const others = [0,1,2,3].filter(i => i !== correct);
  others.forEach((idx, i) => {
    if (i === others.length - 1) { data[idx] = left; }
    else { const v = Math.floor(Math.random() * left); data[idx] = v; left -= v; }
  });

  state.audienceData = data;
  state.lifelines.audience = false;
  document.getElementById('btnAudience').disabled = true;

  const panel = document.getElementById('audiencePanel');
  panel.style.display = 'block';
  const bars = document.getElementById('audienceBars');
  bars.innerHTML = '';
  data.forEach((pct, i) => {
    const isCorrect = i === correct;
    bars.innerHTML += `
      <div class="audience-bar-wrap">
        <span class="audience-pct">${pct}%</span>
        <div class="audience-bar" style="height:${Math.max(pct, 2)}px;background:${isCorrect ? 'linear-gradient(to top, #00e676, #4dabff)' : 'linear-gradient(to top, rgba(255,255,255,0.1), rgba(255,255,255,0.3))'}"></div>
        <span class="audience-label">${LETTERS[i]}</span>
      </div>`;
  });
}

function useSkip() {
  if (!state.lifelines.skip || state.answerState) return;
  clearInterval(state.timerInterval);
  state.lifelines.skip = false;
  document.getElementById('btnSkip').disabled = true;
  if (state.currentQ < 14) {
    state.currentQ++;
    state.selectedAnswer = null;
    state.answerState = null;
    state.eliminated = [];
    state.audienceData = null;
    state.qStartTime = Date.now();
    document.getElementById('audiencePanel').style.display = 'none';
    renderGame();
  }
}

// ==========================================
// END GAME
// ==========================================
function endGame(level) {
  clearInterval(state.timerInterval);
  const score = level >= 15 ? scoreFromLevel(15) :
                level >= 10 ? scoreFromLevel(10) :
                level >= 5 ? scoreFromLevel(5) :
                level > 0 ? safeScore(level) : 0;
  const finalScore = level > 0 ? scoreFromLevel(level) : 0;
  const isMillionaire = level >= 15;
  const avgTime = state.questionTimes.length > 0 ?
    (state.questionTimes.reduce((a,b)=>a+b,0) / state.questionTimes.length).toFixed(1) : "0";
  const lifelinesUsed = [state.lifelines.fiftyFifty, state.lifelines.audience, state.lifelines.skip].filter(x => !x).length;

  // Show result
  showScreen('resultScreen');

  document.getElementById('resultEmoji').textContent = isMillionaire ? 'ğŸ†' : level >= 10 ? 'ğŸŒŸ' : level >= 5 ? 'ğŸ‘' : 'ğŸ’ª';
  const titleEl = document.getElementById('resultTitle');
  titleEl.textContent = isMillionaire ? '××™×œ×™×•× ×¨/×™×ª!' : level >= 10 ? '××¨×©×™× ×××•×“!' : level >= 5 ? '×›×œ ×”×›×‘×•×“!' : '× ×™×¡×™×•×Ÿ ×˜×•×‘!';
  titleEl.className = 'result-title' + (isMillionaire ? ' millionaire' : '');

  let playerText = state.playerName;
  if (state.playerClass) playerText += ` | ${state.playerClass}`;
  if (state.schoolName) playerText += ` | ğŸ« ${state.schoolName}`;
  document.getElementById('resultPlayer').textContent = playerText;

  document.getElementById('statScore').textContent = finalScore.toLocaleString() + ' â‚ª';
  document.getElementById('statLevel').textContent = `${level} / 15`;
  document.getElementById('statTime').textContent = `${avgTime} ×©× ×™×•×ª`;
  document.getElementById('statLifelines').textContent = `${lifelinesUsed} / 3`;

  // Confetti
  const confetti = document.getElementById('confettiContainer');
  confetti.innerHTML = '';
  if (isMillionaire) {
    const emojis = ['ğŸ‰','ğŸ’°','â­','ğŸ†','âœ¨'];
    for (let i = 0; i < 30; i++) {
      const p = document.createElement('div');
      p.className = 'confetti-piece';
      p.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      p.style.cssText = `left:${Math.random()*100}%;--dur:${2+Math.random()*3}s;--delay:${Math.random()*2}s`;
      confetti.appendChild(p);
    }
  }

  // Save score
  saveScore({
    name: state.playerName,
    school: state.schoolName,
    class: state.playerClass,
    level, score: finalScore, avgTime, lifelinesUsed,
    date: new Date().toLocaleDateString('he-IL'),
    timestamp: Date.now()
  });
}

// ==========================================
// LEADERBOARD - STORAGE
// ==========================================
async function saveScore(entry) {
  if (useFirebase) {
    try {
      const ref = db.ref('millionaire-leaderboard');
      await ref.push(entry);
      loadLeaderboard();
    } catch(e) { console.error('Firebase save error:', e); saveLocal(entry); }
  } else {
    saveLocal(entry);
  }
}

function saveLocal(entry) {
  try {
    let board = JSON.parse(localStorage.getItem('millionaire-lb') || '[]');
    board.push(entry);
    board.sort((a,b) => b.score - a.score || parseFloat(a.avgTime) - parseFloat(b.avgTime));
    if (board.length > 200) board = board.slice(0, 200);
    localStorage.setItem('millionaire-lb', JSON.stringify(board));
    state.leaderboard = board;
    renderLeaderboard();
  } catch(e) { console.error('LocalStorage error:', e); }
}

async function loadLeaderboard() {
  if (useFirebase) {
    try {
      const snap = await db.ref('millionaire-leaderboard').orderByChild('score').once('value');
      const data = snap.val();
      if (data) {
        state.leaderboard = Object.values(data).sort((a,b) => b.score - a.score || parseFloat(a.avgTime) - parseFloat(b.avgTime));
      } else {
        state.leaderboard = [];
      }
    } catch(e) {
      console.error('Firebase load error:', e);
      state.leaderboard = JSON.parse(localStorage.getItem('millionaire-lb') || '[]');
    }
  } else {
    state.leaderboard = JSON.parse(localStorage.getItem('millionaire-lb') || '[]');
  }
  renderLeaderboard();
}

// Real-time listener - leaderboard updates live for all users
function initRealtimeLeaderboard() {
  if (!useFirebase) return;
  db.ref('millionaire-leaderboard').on('value', (snap) => {
    const data = snap.val();
    if (data) {
      const entries = [];
      state.firebaseKeys = {};
      Object.entries(data).forEach(([key, val]) => {
        val._fbKey = key;
        entries.push(val);
      });
      entries.sort((a,b) => b.score - a.score || parseFloat(a.avgTime) - parseFloat(b.avgTime));
      state.leaderboard = entries;
    } else {
      state.leaderboard = [];
      state.firebaseKeys = {};
    }
    renderLeaderboard();
  });
}

function clearLeaderboard() {
  if (!state.isAdmin) return;
  if (!confirm('×œ××—×•×§ ××ª ×›×œ ×”×ª×•×¦××•×ª? ×¤×¢×•×œ×” ×–×• ×‘×œ×ª×™ ×”×¤×™×›×”!')) return;
  if (useFirebase) {
    db.ref('millionaire-leaderboard').remove();
  }
  localStorage.removeItem('millionaire-lb');
  state.leaderboard = [];
  renderLeaderboard();
}

function deleteEntry(index) {
  if (!state.isAdmin) return;
  const entry = state.leaderboard[index];
  if (!entry) return;
  const name = entry.name || '×œ× ×™×“×•×¢';
  if (!confirm(`×œ××—×•×§ ××ª ${name}?`)) return;
  
  if (useFirebase && entry._fbKey) {
    db.ref('millionaire-leaderboard/' + entry._fbKey).remove();
  } else {
    state.leaderboard.splice(index, 1);
    localStorage.setItem('millionaire-lb', JSON.stringify(state.leaderboard));
    renderLeaderboard();
  }
}

// ==========================================
// ADMIN
// ==========================================
function toggleAdmin() {
  if (state.isAdmin) {
    state.isAdmin = false;
    updateAdminButton();
    renderLeaderboard();
  } else {
    document.getElementById('adminModal').style.display = 'flex';
    document.getElementById('adminPassword').value = '';
    document.getElementById('adminUser').value = '';
    document.getElementById('adminUser').focus();
  }
}

async function adminLogin() {
  const user = document.getElementById('adminUser').value.trim();
  const pwd = document.getElementById('adminPassword').value;
  
  if (!useFirebase) {
    alert('× ×“×¨×© ×—×™×‘×•×¨ Firebase ×œ×›× ×™×¡×ª ×× ×”×œ');
    return;
  }
  
  try {
    const snap = await db.ref('admin-config').once('value');
    const config = snap.val();
    if (config && user === config.username && pwd === config.password) {
      state.isAdmin = true;
      closeAdminModal();
      updateAdminButton();
      renderLeaderboard();
    } else {
      alert('×©× ××©×ª××© ××• ×¡×™×¡××” ×©×’×•×™×™×');
      document.getElementById('adminPassword').value = '';
      document.getElementById('adminPassword').focus();
    }
  } catch(e) {
    console.error('Admin login error:', e);
    alert('×©×’×™××” ×‘×—×™×‘×•×¨ ×œ×©×¨×ª');
  }
}

function closeAdminModal() {
  document.getElementById('adminModal').style.display = 'none';
}

function updateAdminButton() {
  const btn = document.getElementById('btnAdminToggle');
  if (state.isAdmin) {
    btn.textContent = 'ğŸ”“ ×™×¦×™××ª ×× ×”×œ';
    btn.className = 'btn-admin-login active';
  } else {
    btn.textContent = 'ğŸ” ×× ×”×œ';
    btn.className = 'btn-admin-login';
  }
}

function showLeaderboard() {
  loadLeaderboard();
  showScreen('leaderboardScreen');
}

// ==========================================
// RENDER LEADERBOARD
// ==========================================
function renderLeaderboard() {
  const filterSchool = (document.getElementById('filterSchool')?.value || '').trim().toLowerCase();
  const filterName = (document.getElementById('filterName')?.value || '').trim().toLowerCase();

  let filtered = state.leaderboard.map((e, i) => ({ ...e, _origIndex: i }));
  if (filterSchool) filtered = filtered.filter(e => (e.school || '').toLowerCase().includes(filterSchool));
  if (filterName) filtered = filtered.filter(e => (e.name || '').toLowerCase().includes(filterName));

  document.getElementById('lbCount').textContent = `${filtered.length} ×©×—×§× ×™×`;

  const container = document.getElementById('lbContent');
  if (filtered.length === 0) {
    container.innerHTML = '<div class="lb-empty">×¢×“×™×™×Ÿ ××™×Ÿ ×ª×•×¦××•×ª. ×”×™×• ×”×¨××©×•× ×™× ×œ×©×—×§! ğŸ®</div>';
    return;
  }

  const delCol = state.isAdmin ? '36px ' : '';
  const gridCols = `${delCol}40px 1fr 110px 70px 85px 50px 50px`;
  const gridColsMobile = `${delCol}30px 1fr 80px 50px 70px 40px 40px`;

  let html = `<div class="lb-table">
    <div class="lb-row lb-row-header" style="grid-template-columns:${gridCols}">
      ${state.isAdmin ? '<span></span>' : ''}
      <span>#</span><span>×©×</span><span>ğŸ« ×‘×™×”"×¡</span><span>×›×™×ª×”</span><span>× ×™×§×•×“</span><span>×©×œ×‘</span><span>×–××ŸâŒ€</span>
    </div>
    <div class="lb-body">`;

  filtered.forEach((e, i) => {
    const rankClass = i === 0 ? 'top1' : i === 1 ? 'top2' : i === 2 ? 'top3' : '';
    const rank = i === 0 ? 'ğŸ¥‡' : i === 1 ? 'ğŸ¥ˆ' : i === 2 ? 'ğŸ¥‰' : (i + 1);
    const rankColor = i === 0 ? '#ffd700' : i === 1 ? '#c0c0c0' : i === 2 ? '#cd7f32' : 'rgba(255,255,255,0.4)';
    const origIdx = e._origIndex;

    html += `<div class="lb-row ${rankClass}" style="grid-template-columns:${gridCols};animation:slideUp 0.3s ease-out ${i*0.05}s both">
      ${state.isAdmin ? `<button class="btn-delete-entry" onclick="deleteEntry(${origIdx})" title="××—×§">âœ•</button>` : ''}
      <span class="lb-rank" style="color:${rankColor}">${rank}</span>
      <span class="lb-name">${e.name || '-'}</span>
      <span class="lb-school">${e.school || '-'}</span>
      <span class="lb-class">${e.class || '-'}</span>
      <span class="lb-score">${(e.score || 0).toLocaleString()} â‚ª</span>
      <span class="lb-level">${e.level || 0}/15</span>
      <span class="lb-time">${e.avgTime || 0}s</span>
    </div>`;
  });

  html += '</div></div>';
  
  if (state.isAdmin) {
    html += `<div style="text-align:center;margin-top:12px;">
      <button class="btn-clear-lb" onclick="clearLeaderboard()" style="padding:10px 24px;font-size:14px;font-family:'Heebo',sans-serif;background:rgba(255,23,68,0.15);border:1px solid rgba(255,23,68,0.3);border-radius:10px;color:#ff5252;cursor:pointer;">ğŸ—‘ ××—×§ ××ª ×›×œ ×”×ª×•×¦××•×ª</button>
    </div>`;
  }
  
  container.innerHTML = html;
}

// ==========================================
// INIT
// ==========================================
window.addEventListener('DOMContentLoaded', () => {
  createStars();

  const nameInput = document.getElementById('inputName');
  const startBtn = document.getElementById('btnStart');
  nameInput.addEventListener('input', () => {
    startBtn.disabled = !nameInput.value.trim();
  });
  startBtn.addEventListener('click', startGame);

  // Enter key to start
  document.querySelectorAll('.form-input').forEach(input => {
    input.addEventListener('keydown', e => {
      if (e.key === 'Enter' && nameInput.value.trim()) startGame();
    });
  });

  loadLeaderboard();
  initRealtimeLeaderboard();
  initAdminInFirebase();
});
</script>
</body>
</html>
